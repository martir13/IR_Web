if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(Q,e,r,N,m,K){var b=this;var p=Math.floor(Math.random()*10000);var s=Function.prototype;var T=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/;var U=/[\-\w]+\/\.\.\//;var I=/([^:])\/\//g;var L="";var q={};var P=Q.easyXDM;var X="easyXDM_";var H;var B=false;var k;var j;function F(aa,ac){var ab=typeof aa[ac];return ab=="function"||(!!(ab=="object"&&aa[ac]))||ab=="unknown"}function w(aa,ab){return !!(typeof(aa[ab])=="object"&&aa[ab])}function t(aa){return Object.prototype.toString.call(aa)==="[object Array]"}function d(){try{var aa=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");k=Array.prototype.slice.call(aa.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1);j=parseInt(k[0],10)>9&&parseInt(k[1],10)>0;aa=null;return true}catch(ab){return false}}var x,A;if(F(Q,"addEventListener")){x=function(ac,aa,ab){ac.addEventListener(aa,ab,false)};A=function(ac,aa,ab){ac.removeEventListener(aa,ab,false)}}else{if(F(Q,"attachEvent")){x=function(aa,ac,ab){aa.attachEvent("on"+ac,ab)};A=function(aa,ac,ab){aa.detachEvent("on"+ac,ab)}}else{throw new Error("Browser not supported")}}var Z=false,M=[],O;if("readyState" in e){O=e.readyState;Z=O=="complete"||(~navigator.userAgent.indexOf("AppleWebKit/")&&(O=="loaded"||O=="interactive"))}else{Z=!!e.body}function u(){if(Z){return}Z=true;for(var aa=0;aa<M.length;aa++){M[aa]()}M.length=0}if(!Z){if(F(Q,"addEventListener")){x(e,"DOMContentLoaded",u)}else{x(e,"readystatechange",function(){if(e.readyState=="complete"){u()}});if(e.documentElement.doScroll&&Q===top){var h=function(){if(Z){return}try{e.documentElement.doScroll("left")}catch(aa){N(h,1);return}u()};h()}}x(Q,"load",u)}function J(ab,aa){if(Z){ab.call(aa);return}M.push(function(){ab.call(aa)})}function o(){var ac=parent;if(L!==""){for(var aa=0,ab=L.split(".");aa<ab.length;aa++){ac=ac[ab[aa]]}}return ac.easyXDM}function f(aa){Q.easyXDM=P;L=aa;if(L){X="easyXDM_"+L.replace(".","_")+"_"}return q}function C(aa){return aa.match(T)[3]}function g(aa){return aa.match(T)[4]||""}function l(ac){var aa=ac.toLowerCase().match(T);var ad=aa[2],ae=aa[3],ab=aa[4]||"";if((ad=="http:"&&ab==":80")||(ad=="https:"&&ab==":443")){ab=""}return ad+"//"+ae+ab}function E(aa){aa=aa.replace(I,"$1/");if(!aa.match(/^(http||https):\/\//)){var ab=(aa.substring(0,1)==="/")?"":r.pathname;if(ab.substring(ab.length-1)!=="/"){ab=ab.substring(0,ab.lastIndexOf("/")+1)}aa=r.protocol+"//"+r.host+ab+aa}while(U.test(aa)){aa=aa.replace(U,"")}return aa}function S(aa,ad){var af="",ac=aa.indexOf("#");if(ac!==-1){af=aa.substring(ac);aa=aa.substring(0,ac)}var ae=[];for(var ab in ad){if(ad.hasOwnProperty(ab)){ae.push(ab+"="+K(ad[ab]))}}return aa+(B?"#":(aa.indexOf("?")==-1?"?":"&"))+ae.join("&")+af}var V=(function(aa){aa=aa.substring(1).split("&");var ac={},ad,ab=aa.length;while(ab--){ad=aa[ab].split("=");ac[ad[0]]=m(ad[1])}return ac}(/xdm_e=/.test(r.search)?r.search:r.hash));function v(aa){return typeof aa==="undefined"}var R=function(){var ab={};var ac={a:[1,2,3]},aa='{"a":[1,2,3]}';if(typeof JSON!="undefined"&&typeof JSON.stringify==="function"&&JSON.stringify(ac).replace((/\s/g),"")===aa){return JSON}if(Object.toJSON){if(Object.toJSON(ac).replace((/\s/g),"")===aa){ab.stringify=Object.toJSON}}if(typeof String.prototype.evalJSON==="function"){ac=aa.evalJSON();if(ac.a&&ac.a.length===3&&ac.a[2]===3){ab.parse=function(ad){return ad.evalJSON()}}}if(ab.stringify&&ab.parse){R=function(){return ab};return ab}return null};function W(aa,ab,ac){var ae;for(var ad in ab){if(ab.hasOwnProperty(ad)){if(ad in aa){ae=ab[ad];if(typeof ae==="object"){W(aa[ad],ae,ac)}else{if(!ac){aa[ad]=ab[ad]}}}else{aa[ad]=ab[ad]}}}return aa}function a(){var ab=e.body.appendChild(e.createElement("form")),aa=ab.appendChild(e.createElement("input"));aa.name=X+"TEST"+p;H=aa!==ab.elements[aa.name];e.body.removeChild(ab)}function D(aa){if(v(H)){a()}var ac;if(H){ac=e.createElement('<iframe name="'+aa.props.name+'"/>')}else{ac=e.createElement("IFRAME");ac.name=aa.props.name}ac.id=ac.name=aa.props.name;delete aa.props.name;if(aa.onLoad){x(ac,"load",aa.onLoad)}if(typeof aa.container=="string"){aa.container=e.getElementById(aa.container)}if(!aa.container){W(ac.style,{position:"absolute",top:"-2000px"});aa.container=e.body}var ab=aa.props.src;delete aa.props.src;W(ac,aa.props);ac.border=ac.frameBorder=0;ac.allowTransparency=true;aa.container.appendChild(ac);ac.src=ab;aa.props.src=ab;return ac}function Y(ad,ac){if(typeof ad=="string"){ad=[ad]}var ab,aa=ad.length;while(aa--){ab=ad[aa];ab=new RegExp(ab.substr(0,1)=="^"?ab:("^"+ab.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"));if(ab.test(ac)){return true}}return false}function n(ac){var ah=ac.protocol,ab;ac.isHost=ac.isHost||v(V.xdm_p);B=ac.hash||false;if(!ac.props){ac.props={}}if(!ac.isHost){ac.channel=V.xdm_c;ac.secret=V.xdm_s;ac.remote=V.xdm_e;ah=V.xdm_p;if(ac.acl&&!Y(ac.acl,ac.remote)){throw new Error("Access denied for "+ac.remote)}}else{ac.remote=E(ac.remote);ac.channel=ac.channel||"default"+p++;ac.secret=Math.random().toString(16).substring(2);if(v(ah)){if(l(r.href)==l(ac.remote)){ah="4"}else{if(F(Q,"postMessage")||F(e,"postMessage")){ah="1"}else{if(ac.swf&&F(Q,"ActiveXObject")&&d()){ah="6"}else{if(navigator.product==="Gecko"&&"frameElement" in Q&&navigator.userAgent.indexOf("WebKit")==-1){ah="5"}else{if(ac.remoteHelper){ac.remoteHelper=E(ac.remoteHelper);ah="2"}else{ah="0"}}}}}}}ac.protocol=ah;switch(ah){case"0":W(ac,{interval:100,delay:2000,useResize:true,useParent:false,usePolling:false},true);if(ac.isHost){if(!ac.local){var af=r.protocol+"//"+r.host,aa=e.body.getElementsByTagName("img"),ag;var ad=aa.length;while(ad--){ag=aa[ad];if(ag.src.substring(0,af.length)===af){ac.local=ag.src;break}}if(!ac.local){ac.local=Q}}var ae={xdm_c:ac.channel,xdm_p:0};if(ac.local===Q){ac.usePolling=true;ac.useParent=true;ac.local=r.protocol+"//"+r.host+r.pathname+r.search;ae.xdm_e=ac.local;ae.xdm_pa=1}else{ae.xdm_e=E(ac.local)}if(ac.container){ac.useResize=false;ae.xdm_po=1}ac.remote=S(ac.remote,ae)}else{W(ac,{channel:V.xdm_c,remote:V.xdm_e,useParent:!v(V.xdm_pa),usePolling:!v(V.xdm_po),useResize:ac.useParent?false:ac.useResize})}ab=[new q.stack.HashTransport(ac),new q.stack.ReliableBehavior({}),new q.stack.QueueBehavior({encode:true,maxLength:4000-ac.remote.length}),new q.stack.VerifyBehavior({initiate:ac.isHost})];break;case"1":ab=[new q.stack.PostMessageTransport(ac)];break;case"2":ab=[new q.stack.NameTransport(ac),new q.stack.QueueBehavior(),new q.stack.VerifyBehavior({initiate:ac.isHost})];break;case"3":ab=[new q.stack.NixTransport(ac)];break;case"4":ab=[new q.stack.SameOriginTransport(ac)];break;case"5":ab=[new q.stack.FrameElementTransport(ac)];break;case"6":if(!k){d()}ab=[new q.stack.FlashTransport(ac)];break}ab.push(new q.stack.QueueBehavior({lazy:ac.lazy,remove:true}));return ab}function G(ad){var ae,ac={incoming:function(ag,af){this.up.incoming(ag,af)},outgoing:function(af,ag){this.down.outgoing(af,ag)},callback:function(af){this.up.callback(af)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var ab=0,aa=ad.length;ab<aa;ab++){ae=ad[ab];W(ae,ac,true);if(ab!==0){ae.down=ad[ab-1]}if(ab!==aa-1){ae.up=ad[ab+1]}}return ae}function y(aa){aa.up.down=aa.down;aa.down.up=aa.up;aa.up=aa.down=null}W(q,{version:"2.4.15.118",query:V,stack:{},apply:W,getJSONObject:R,whenReady:J,noConflict:f});q.DomHelper={on:x,un:A,requiresJSON:function(aa){if(!w(Q,"JSON")){e.write('<script type="text/javascript" src="'+aa+'"><\/script>')}}};(function(){var aa={};q.Fn={set:function(ab,ac){aa[ab]=ac},get:function(ac,ab){var ad=aa[ac];if(ab){delete aa[ac]}return ad}}}());q.Socket=function(ab){var aa=G(n(ab).concat([{incoming:function(ae,ad){ab.onMessage(ae,ad)},callback:function(ad){if(ab.onReady){ab.onReady(ad)}}}])),ac=l(ab.remote);this.origin=l(ab.remote);this.destroy=function(){aa.destroy()};this.postMessage=function(ad){aa.outgoing(ad,ac)};aa.init()};q.Rpc=function(ac,ab){if(ab.local){for(var ae in ab.local){if(ab.local.hasOwnProperty(ae)){var ad=ab.local[ae];if(typeof ad==="function"){ab.local[ae]={method:ad}}}}}var aa=G(n(ac).concat([new q.stack.RpcBehavior(this,ab),{callback:function(af){if(ac.onReady){ac.onReady(af)}}}]));this.origin=l(ac.remote);this.destroy=function(){aa.destroy()};aa.init()};q.stack.SameOriginTransport=function(ab){var ac,ae,ad,aa;return(ac={outgoing:function(ag,ah,af){ad(ag);if(af){af()}},destroy:function(){if(ae){ae.parentNode.removeChild(ae);ae=null}},onDOMReady:function(){aa=l(ab.remote);if(ab.isHost){W(ab.props,{src:S(ab.remote,{xdm_e:r.protocol+"//"+r.host+r.pathname,xdm_c:ab.channel,xdm_p:4}),name:X+ab.channel+"_provider"});ae=D(ab);q.Fn.set(ab.channel,function(af){ad=af;N(function(){ac.up.callback(true)},0);return function(ag){ac.up.incoming(ag,aa)}})}else{ad=o().Fn.get(ab.channel,true)(function(af){ac.up.incoming(af,aa)});N(function(){ac.up.callback(true)},0)}},init:function(){J(ac.onDOMReady,ac)}})};q.stack.FlashTransport=function(ad){var af,aa,ae,ag,ab,ah;function ai(ak,aj){N(function(){af.up.incoming(ak,ag)},0)}function ac(ak){var aj=ad.swf+"?host="+ad.isHost;var am="easyXDM_swf_"+Math.floor(Math.random()*10000);q.Fn.set("flash_loaded"+ak.replace(/[\-.]/g,"_"),function(){q.stack.FlashTransport[ak].swf=ab=ah.firstChild;var an=q.stack.FlashTransport[ak].queue;for(var ao=0;ao<an.length;ao++){an[ao]()}an.length=0});if(ad.swfContainer){ah=(typeof ad.swfContainer=="string")?e.getElementById(ad.swfContainer):ad.swfContainer}else{ah=e.createElement("div");W(ah.style,j&&ad.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0});e.body.appendChild(ah)}var al="callback=flash_loaded"+ak.replace(/[\-.]/g,"_")+"&proto="+b.location.protocol+"&domain="+C(b.location.href)+"&port="+g(b.location.href)+"&ns="+L;ah.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+am+"' data='"+aj+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+aj+"'></param><param name='flashvars' value='"+al+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+al+"' allowScriptAccess='always' wmode='transparent' src='"+aj+"' height='1' width='1'></embed></object>"}return(af={outgoing:function(ak,al,aj){ab.postMessage(ad.channel,ak.toString());if(aj){aj()}},destroy:function(){try{ab.destroyChannel(ad.channel)}catch(aj){}ab=null;if(aa){aa.parentNode.removeChild(aa);aa=null}},onDOMReady:function(){ag=ad.remote;q.Fn.set("flash_"+ad.channel+"_init",function(){N(function(){af.up.callback(true)})});q.Fn.set("flash_"+ad.channel+"_onMessage",ai);ad.swf=E(ad.swf);var ak=C(ad.swf);var aj=function(){q.stack.FlashTransport[ak].init=true;ab=q.stack.FlashTransport[ak].swf;ab.createChannel(ad.channel,ad.secret,l(ad.remote),ad.isHost);if(ad.isHost){if(j&&ad.swfNoThrottle){W(ad.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"})}W(ad.props,{src:S(ad.remote,{xdm_e:l(r.href),xdm_c:ad.channel,xdm_p:6,xdm_s:ad.secret}),name:X+ad.channel+"_provider"});aa=D(ad)}};if(q.stack.FlashTransport[ak]&&q.stack.FlashTransport[ak].init){aj()}else{if(!q.stack.FlashTransport[ak]){q.stack.FlashTransport[ak]={queue:[aj]};ac(ak)}else{q.stack.FlashTransport[ak].queue.push(aj)}}},init:function(){J(af.onDOMReady,af)}})};q.stack.PostMessageTransport=function(ad){var af,ag,ab,ac;function aa(ah){if(ah.origin){return l(ah.origin)}if(ah.uri){return l(ah.uri)}if(ah.domain){return r.protocol+"//"+ah.domain}throw"Unable to retrieve the origin of the event"}function ae(ai){var ah=aa(ai);if(ah==ac&&ai.data.substring(0,ad.channel.length+1)==ad.channel+" "){af.up.incoming(ai.data.substring(ad.channel.length+1),ah)}}return(af={outgoing:function(ai,aj,ah){ab.postMessage(ad.channel+" "+ai,aj||ac);if(ah){ah()}},destroy:function(){A(Q,"message",ae);if(ag){ab=null;ag.parentNode.removeChild(ag);ag=null}},onDOMReady:function(){ac=l(ad.remote);if(ad.isHost){var ah=function(ai){if(ai.data==ad.channel+"-ready"){ab=("postMessage" in ag.contentWindow)?ag.contentWindow:ag.contentWindow.document;A(Q,"message",ah);x(Q,"message",ae);N(function(){af.up.callback(true)},0)}};x(Q,"message",ah);W(ad.props,{src:S(ad.remote,{xdm_e:l(r.href),xdm_c:ad.channel,xdm_p:1}),name:X+ad.channel+"_provider"});ag=D(ad)}else{x(Q,"message",ae);ab=("postMessage" in Q.parent)?Q.parent:Q.parent.document;ab.postMessage(ad.channel+"-ready",ac);N(function(){af.up.callback(true)},0)}},init:function(){J(af.onDOMReady,af)}})};q.stack.FrameElementTransport=function(ab){var ac,ae,ad,aa;return(ac={outgoing:function(ag,ah,af){ad.call(this,ag);if(af){af()}},destroy:function(){if(ae){ae.parentNode.removeChild(ae);ae=null}},onDOMReady:function(){aa=l(ab.remote);if(ab.isHost){W(ab.props,{src:S(ab.remote,{xdm_e:l(r.href),xdm_c:ab.channel,xdm_p:5}),name:X+ab.channel+"_provider"});ae=D(ab);ae.fn=function(af){delete ae.fn;ad=af;N(function(){ac.up.callback(true)},0);return function(ag){ac.up.incoming(ag,aa)}}}else{if(e.referrer&&l(e.referrer)!=V.xdm_e){Q.top.location=V.xdm_e}ad=Q.frameElement.fn(function(af){ac.up.incoming(af,aa)});ac.up.callback(true)}},init:function(){J(ac.onDOMReady,ac)}})};q.stack.NameTransport=function(ae){var af;var ah,al,ad,aj,ak,ab,aa;function ai(ao){var an=ae.remoteHelper+(ah?"#_3":"#_2")+ae.channel;al.contentWindow.sendMessage(ao,an)}function ag(){if(ah){if(++aj===2||!ah){af.up.callback(true)}}else{ai("ready");af.up.callback(true)}}function am(an){af.up.incoming(an,ab)}function ac(){if(ak){N(function(){ak(true)},0)}}return(af={outgoing:function(ao,ap,an){ak=an;ai(ao)},destroy:function(){al.parentNode.removeChild(al);al=null;if(ah){ad.parentNode.removeChild(ad);ad=null}},onDOMReady:function(){ah=ae.isHost;aj=0;ab=l(ae.remote);ae.local=E(ae.local);if(ah){q.Fn.set(ae.channel,function(ao){if(ah&&ao==="ready"){q.Fn.set(ae.channel,am);ag()}});aa=S(ae.remote,{xdm_e:ae.local,xdm_c:ae.channel,xdm_p:2});W(ae.props,{src:aa+"#"+ae.channel,name:X+ae.channel+"_provider"});ad=D(ae)}else{ae.remoteHelper=ae.remote;q.Fn.set(ae.channel,am)}al=D({props:{src:ae.local+"#_4"+ae.channel},onLoad:function an(){var ao=al||this;A(ao,"load",an);q.Fn.set(ae.channel+"_load",ac);(function ap(){if(typeof ao.contentWindow.sendMessage=="function"){ag()}else{N(ap,50)}}())}})},init:function(){J(af.onDOMReady,af)}})};q.stack.HashTransport=function(ac){var af;var ak=this,ai,ad,aa,ag,ap,ae,ao;var aj,ab;function an(ar){if(!ao){return}var aq=ac.remote+"#"+(ap++)+"_"+ar;((ai||!aj)?ao.contentWindow:ao).location=aq}function ah(aq){ag=aq;af.up.incoming(ag.substring(ag.indexOf("_")+1),ab)}function am(){if(!ae){return}var aq=ae.location.href,at="",ar=aq.indexOf("#");if(ar!=-1){at=aq.substring(ar)}if(at&&at!=ag){ah(at)}}function al(){ad=setInterval(am,aa)}return(af={outgoing:function(aq,ar){an(aq)},destroy:function(){Q.clearInterval(ad);if(ai||!aj){ao.parentNode.removeChild(ao)}ao=null},onDOMReady:function(){ai=ac.isHost;aa=ac.interval;ag="#"+ac.channel;ap=0;aj=ac.useParent;ab=l(ac.remote);if(ai){ac.props={src:ac.remote,name:X+ac.channel+"_provider"};if(aj){ac.onLoad=function(){ae=Q;al();af.up.callback(true)}}else{var at=0,aq=ac.delay/50;(function ar(){if(++at>aq){throw new Error("Unable to reference listenerwindow")}try{ae=ao.contentWindow.frames[X+ac.channel+"_consumer"]}catch(au){}if(ae){al();af.up.callback(true)}else{N(ar,50)}}())}ao=D(ac)}else{ae=Q;al();if(aj){ao=parent;af.up.callback(true)}else{W(ac,{props:{src:ac.remote+"#"+ac.channel+new Date(),name:X+ac.channel+"_consumer"},onLoad:function(){af.up.callback(true)}});ao=D(ac)}}},init:function(){J(af.onDOMReady,af)}})};q.stack.ReliableBehavior=function(ab){var ad,af;var ae=0,aa=0,ac="";return(ad={incoming:function(ai,ag){var ah=ai.indexOf("_"),aj=ai.substring(0,ah).split(",");ai=ai.substring(ah+1);if(aj[0]==ae){ac="";if(af){af(true)}}if(ai.length>0){ad.down.outgoing(aj[1]+","+ae+"_"+ac,ag);if(aa!=aj[1]){aa=aj[1];ad.up.incoming(ai,ag)}}},outgoing:function(ai,ag,ah){ac=ai;af=ah;ad.down.outgoing(aa+","+(++ae)+"_"+ai,ag)}})};q.stack.QueueBehavior=function(ac){var af,ag=[],aj=true,ad="",ai,aa=0,ab=false,ae=false;function ah(){if(ac.remove&&ag.length===0){y(af);return}if(aj||ag.length===0||ai){return}aj=true;var ak=ag.shift();af.down.outgoing(ak.data,ak.origin,function(al){aj=false;if(ak.callback){N(function(){ak.callback(al)},0)}ah()})}return(af={init:function(){if(v(ac)){ac={}}if(ac.maxLength){aa=ac.maxLength;ae=true}if(ac.lazy){ab=true}else{af.down.init()}},callback:function(al){aj=false;var ak=af.up;ah();ak.callback(al)},incoming:function(an,al){if(ae){var am=an.indexOf("_"),ak=parseInt(an.substring(0,am),10);ad+=an.substring(am+1);if(ak===0){if(ac.encode){ad=m(ad)}af.up.incoming(ad,al);ad=""}}else{af.up.incoming(an,al)}},outgoing:function(ao,al,an){if(ac.encode){ao=K(ao)}var ak=[],am;if(ae){while(ao.length!==0){am=ao.substring(0,aa);ao=ao.substring(am.length);ak.push(am)}while((am=ak.shift())){ag.push({data:ak.length+"_"+am,origin:al,callback:ak.length===0?an:null})}}else{ag.push({data:ao,origin:al,callback:an})}if(ab){af.down.init()}else{ah()}},destroy:function(){ai=true;af.down.destroy()}})};q.stack.VerifyBehavior=function(ae){var af,ad,ab,ac=false;function aa(){ad=Math.random().toString(16).substring(2);af.down.outgoing(ad)}return(af={incoming:function(ai,ag){var ah=ai.indexOf("_");if(ah===-1){if(ai===ad){af.up.callback(true)}else{if(!ab){ab=ai;if(!ae.initiate){aa()}af.down.outgoing(ai)}}}else{if(ai.substring(0,ah)===ab){af.up.incoming(ai.substring(ah+1),ag)}}},outgoing:function(ai,ag,ah){af.down.outgoing(ad+"_"+ai,ag,ah)},callback:function(ag){if(ae.initiate){aa()}}})};q.stack.RpcBehavior=function(ag,ab){var ad,ai=ab.serializer||R();var ah=0,af={};function aa(aj){aj.jsonrpc="2.0";ad.down.outgoing(ai.stringify(aj))}function ae(aj,al){var ak=Array.prototype.slice;return function(){var am=arguments.length,ao,an={method:al};if(am>0&&typeof arguments[am-1]==="function"){if(am>1&&typeof arguments[am-2]==="function"){ao={success:arguments[am-2],error:arguments[am-1]};an.params=ak.call(arguments,0,am-2)}else{ao={success:arguments[am-1]};an.params=ak.call(arguments,0,am-1)}af[""+(++ah)]=ao;an.id=ah}else{an.params=ak.call(arguments,0)}if(aj.namedParams&&an.params.length===1){an.params=an.params[0]}aa(an)}}function ac(aq,ap,al,ao){if(!al){if(ap){aa({id:ap,error:{code:-32601,message:"Procedure not found."}})}return}var an,ak;if(ap){an=function(ar){an=s;aa({id:ap,result:ar})};ak=function(ar,at){ak=s;var au={id:ap,error:{code:-32099,message:ar}};if(at){au.error.data=at}aa(au)}}else{an=ak=s}if(!t(ao)){ao=[ao]}try{var aj=al.method.apply(al.scope,ao.concat([an,ak]));if(!v(aj)){an(aj)}}catch(am){ak(am.message)}}return(ad={incoming:function(ak,aj){var al=ai.parse(ak);if(al.method){if(ab.handle){ab.handle(al,aa)}else{ac(al.method,al.id,ab.local[al.method],al.params)}}else{var am=af[al.id];if(al.error){if(am.error){am.error(al.error)}}else{if(am.success){am.success(al.result)}}delete af[al.id]}},init:function(){if(ab.remote){for(var aj in ab.remote){if(ab.remote.hasOwnProperty(aj)){ag[aj]=ae(ab.remote[aj],aj)}}}ad.down.init()},destroy:function(){for(var aj in ab.remote){if(ab.remote.hasOwnProperty(aj)&&ag.hasOwnProperty(aj)){delete ag[aj]}}ad.down.destroy()}})};b.easyXDM=q})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);(function(f,b){function e(){}function v(F){d=[F]}function o(F){g.insertBefore(F,g.firstChild)}function n(H,F,G){return H&&H.apply(F.context||F,G)}function m(F){return/\?/.test(F)?"&":"?"}var p="async",u="charset",s="",D="error",t="_jqjsp",y="on",q=y+"click",r=y+D,a=y+"load",k=y+"readystatechange",C="removeChild",h="<script/>",x="success",B="timeout",A=f.browser,g=f("head")[0]||document.documentElement,w={},l=0,d,j={callback:t,url:location.href};function E(F){F=f.extend({},j,F);var T=F.complete,H=F.dataFilter,P=F.callbackParameter,U=F.callback,J=F.cache,M=F.pageCache,L=F.charset,G=F.url,O=F.data,S=F.timeout,R,N=0,K=e;F.abort=function(){!N++&&K()};if(n(F.beforeSend,F,[F])===false||N){return F}G=G||s;O=O?((typeof O)=="string"?O:f.param(O,F.traditional)):s;G+=O?(m(G)+O):s;P&&(G+=m(G)+encodeURIComponent(P)+"=?");!J&&!M&&(G+=m(G)+"_"+(new Date()).getTime()+"=");G=G.replace(/=\?(&|$)/,"="+U+"$1");function Q(V){!N++&&b(function(){K();M&&(w[G]={s:[V]});H&&(V=H.apply(F,[V]));n(F.success,F,[V,x]);n(T,F,[F,x])},0)}function I(V){!N++&&b(function(){K();M&&V!=B&&(w[G]=V);n(F.error,F,[F,V]);n(T,F,[F,V])},0)}M&&(R=w[G])?(R.s?Q(R.s[0]):I(R)):b(function(W,V,X){if(!N){X=S>0&&b(function(){I(B)},S);K=function(){X&&clearTimeout(X);W[k]=W[q]=W[a]=W[r]=null;g[C](W);V&&g[C](V)};window[U]=v;W=f(h)[0];W.id=t+l++;if(L){W[u]=L}function Y(Z){(W[q]||e)();Z=d;d=undefined;Z?Q(Z[0]):I(D)}if(A.msie){W.event=q;W.htmlFor=W.id;W[k]=function(){/loaded|complete/.test(W.readyState)&&Y()}}else{W[r]=W[a]=Y;A.opera?((V=f(h)[0]).text="jQuery('#"+W.id+"')[0]."+r+"()"):W[p]=p}W.src=G;o(W);V&&o(V)}},0);return F}E.setup=function(F){f.extend(j,F)};f.jsonp=E})(jQuery,setTimeout);var SimpleDateFormat;(function(){function h(r){return typeof r=="undefined"}var q=/('[^']*')|(G+|y+|M+|w+|W+|D+|d+|F+|E+|a+|H+|k+|K+|h+|m+|s+|S+|Z+)|([a-zA-Z]+)|([^a-zA-Z']+)/;var l=["January","February","March","April","May","June","July","August","September","October","November","December"];var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var k=0,j=1,g=2,n=3,f=4,o=5;var m={G:k,y:n,M:f,w:g,W:g,D:g,d:g,F:g,E:j,a:k,H:g,k:g,K:g,h:g,m:g,s:g,S:g,Z:o};var e=24*60*60*1000;var a=7*e;var b=1;var p=function(s,t,r){var u=new Date(s,t,r,0,0,0);u.setMilliseconds(0);return u};Date.prototype.getDifference=function(r){return this.getTime()-r.getTime()};Date.prototype.isBefore=function(r){return this.getTime()<r.getTime()};Date.prototype.getUTCTime=function(){return Date.UTC(this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())};Date.prototype.getTimeSince=function(r){return this.getUTCTime()-r.getUTCTime()};Date.prototype.getPreviousSunday=function(){var s=new Date(this.getFullYear(),this.getMonth(),this.getDate(),12,0,0);var r=new Date(s.getTime()-this.getDay()*e);return p(r.getFullYear(),r.getMonth(),r.getDate())};Date.prototype.getWeekInYear=function(w){if(h(this.minimalDaysInFirstWeek)){w=b}var u=this.getPreviousSunday();var s=p(this.getFullYear(),0,1);var v=u.isBefore(s)?0:1+Math.floor(u.getTimeSince(s)/a);var r=7-s.getDay();var t=v;if(r<w){t--}return t};Date.prototype.getWeekInMonth=function(w){if(h(this.minimalDaysInFirstWeek)){w=b}var s=this.getPreviousSunday();var v=p(this.getFullYear(),this.getMonth(),1);var u=s.isBefore(v)?0:1+Math.floor((s.getTimeSince(v))/a);var r=7-v.getDay();var t=u;if(r>=w){t++}return t};Date.prototype.getDayInYear=function(){var r=p(this.getFullYear(),0,1);return 1+Math.floor(this.getTimeSince(r)/e)};SimpleDateFormat=function(r){this.formatString=r};SimpleDateFormat.prototype.setMinimalDaysInFirstWeek=function(r){this.minimalDaysInFirstWeek=r};SimpleDateFormat.prototype.getMinimalDaysInFirstWeek=function(r){return h(this.minimalDaysInFirstWeek)?b:this.minimalDaysInFirstWeek};SimpleDateFormat.prototype.format=function(L){var r="";var C;var v=function(O,N){while(O.length<N){O="0"+O}return O};var t=function(P,O,N){return(O>=4)?P:P.substr(0,Math.max(N,O))};var A=function(P,O){var N=""+P;return v(N,O)};var y=this.formatString;while((C=q.exec(y))){var G=C[0];var B=C[1];var D=C[2];var x=C[3];var w=C[4];if(B){if(B=="''"){r+="'"}else{r+=B.substring(1,B.length-1)}}else{if(x){}else{if(w){r+=w}else{if(D){var s=D.charAt(0);var M=D.length;var E="";switch(s){case"G":E="AD";break;case"y":E=L.getFullYear();break;case"M":E=L.getMonth();break;case"w":E=L.getWeekInYear(this.getMinimalDaysInFirstWeek());break;case"W":E=L.getWeekInMonth(this.getMinimalDaysInFirstWeek());break;case"D":E=L.getDayInYear();break;case"d":E=L.getDate();break;case"F":E=1+Math.floor((L.getDate()-1)/7);break;case"E":E=d[L.getDay()];break;case"a":E=(L.getHours()>=12)?"PM":"AM";break;case"H":E=L.getHours();break;case"k":E=L.getHours()||24;break;case"K":E=L.getHours()%12;break;case"h":E=(L.getHours()%12)||12;break;case"m":E=L.getMinutes();break;case"s":E=L.getSeconds();break;case"S":E=L.getMilliseconds();break;case"Z":E=L.getTimezoneOffset();break}switch(m[s]){case k:r+=t(E,M,2);break;case j:r+=t(E,M,3);break;case g:r+=A(E,M);break;case n:if(M<=3){var u=""+E;r+=u.substr(2,2)}else{r+=A(E,M)}break;case f:if(M>=3){r+=t(l[E],M,M)}else{r+=A(E+1,M)}break;case o:var K=(E>0);var H=K?"-":"+";var J=Math.abs(E);var I=""+Math.floor(J/60);I=v(I,2);var F=""+(J%60);F=v(F,2);r+=H+I+F;break}}}}}y=y.substr(C.index+C[0].length)}return r}})();(function(e){e.timeago=function(h){if(h instanceof Date){return a(h)}else{if(typeof h==="string"){return a(e.timeago.parse(h))}else{return a(e.timeago.datetime(h))}}};var g=e.timeago;e.extend(e.timeago,{settings:{refreshMillis:60000,allowFuture:false,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(n){var o=this.settings.strings;var k=o.prefixAgo;var s=o.suffixAgo;if(this.settings.allowFuture){if(n<0){k=o.prefixFromNow;s=o.suffixFromNow}n=Math.abs(n)}var q=n/1000;var h=q/60;var p=h/60;var r=p/24;var l=r/365;function j(t,v){var u=e.isFunction(t)?t(v,n):t;var w=(o.numbers&&o.numbers[v])||v;return u.replace(/%d/i,w)}var m=q<45&&j(o.seconds,Math.round(q))||q<90&&j(o.minute,1)||h<45&&j(o.minutes,Math.round(h))||h<90&&j(o.hour,1)||p<24&&j(o.hours,Math.round(p))||p<48&&j(o.day,1)||r<30&&j(o.days,Math.floor(r))||r<60&&j(o.month,1)||r<365&&j(o.months,Math.floor(r/30))||l<2&&j(o.year,1)||j(o.years,Math.floor(l));return e.trim([k,m,s].join(" "))},parse:function(j){var h=e.trim(j);h=h.replace(/\.\d\d\d+/,"");h=h.replace(/-/,"/").replace(/-/,"/");h=h.replace(/T/," ").replace(/Z/," UTC");h=h.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");return new Date(h)},datetime:function(j){var k=e(j).get(0).tagName.toLowerCase()==="time";var h=k?e(j).attr("datetime"):e(j).attr("title");return g.parse(h)}});e.fn.timeago=function(){var j=this;j.each(d);var h=g.settings;if(h.refreshMillis>0){setInterval(function(){j.each(d)},h.refreshMillis)}return j};function d(){var h=b(this);if(!isNaN(h.datetime)){e(this).text(a(h.datetime))}return this}function b(h){h=e(h);if(!h.data("timeago")){h.data("timeago",{datetime:g.datetime(h)});var j=e.trim(h.text());if(j.length>0){h.attr("title",j)}}return h.data("timeago")}function a(h){return g.inWords(f(h))}function f(h){return(new Date().getTime()-h.getTime())}document.createElement("abbr");document.createElement("time")}(jQuery));(function(f){var r="success";var e="error";var o="abort";var s="DELETE";var b="GET";var d="POST";var h="PUT";f.PercServiceUtils={STATUS_ERROR:e,STATUS_SUCCESS:r,STATUS_ABORT:o,TYPE_DELETE:s,TYPE_GET:b,TYPE_POST:d,TYPE_PUT:h,makeJsonRequest:k,makeXmlRequest:q,makeRequest:p,makeXdmJsonRequest:j,makeDeleteRequest:g,extractDefaultErrorMessage:n,extractFieldErrorCode:a,extractGlobalErrorCode:m};f.ajaxSetup({timeout:60000});function k(u,A,B,C,w,x){var D=this;var v=f.isFunction(f.getCm1License)?f.getCm1License():"";var y={dataType:"json",async:!B,contentType:"application/json",type:A,url:u,headers:{"perc-tid":v},success:function(G,F){var E={data:G,textstatus:F};C(D.STATUS_SUCCESS,E)},error:function(H,F,G){if(H.status==204||H.status==1223){var E={data:{},textstatus:H.statusText};C(D.STATUS_SUCCESS,E);return}else{if(H.status>0){var E={request:H,textstatus:F,error:G};C(D.STATUS_ERROR,E)}else{if(f.isFunction(x)){x(D.STATUS_ABORT)}}}}};if(w){f.extend(y,{data:JSON.stringify(w)})}return f.ajax(y)}function p(v,B,C,F,w,E,D,y,x){var G=this;var u=f.isFunction(f.getCm1License)?f.getCm1License():"";var A={dataType:D,async:!C,contentType:E,type:B,url:(y)?v:escape(v),headers:{"perc-tid":u},success:function(J,I){var H={data:J,textstatus:I};F(G.STATUS_SUCCESS,H)},error:function(K,I,J){if(K.status==204||K.status==1223){var H={data:{},textstatus:K.statusText};F(G.STATUS_SUCCESS,H);return}else{if(K.status>0){var H={request:K,textstatus:I,error:J};F(G.STATUS_ERROR,H)}else{if(f.isFunction(x)){x(G.STATUS_ABORT)}}}}};if(w){f.extend(A,{data:JSON.stringify(w)})}f.ajax(A)}function j(x,v,B,C,y){var D=this;var w=f.isFunction(f.getCm1License)?f.getCm1License():"";if(typeof(easyXDM)=="undefined"){D.makeJsonRequest(v,B,false,C,y);return}if(C==null||typeof(C)=="undefined"){alert("Callback cannot be null or undefined");return}if(!(B==D.TYPE_GET||B==D.TYPE_POST)){alert("Invalid type specified, must be GET or POST.");return}if(x==null||typeof(x)=="undefined"){if(typeof(jQuery.getDeliveryServiceBase)=="function"){x=jQuery.getDeliveryServiceBase()}else{alert("Servicebase not defined, cannot make ajax call.");return}}var A=new easyXDM.Rpc({remote:x+"/perc-common-ui/cors/"},{remote:{request:{}}});var u={url:v,headers:{"Content-Type":"application/json",Accept:"application/json,text/plain","perc-tid":w},method:B,timeout:60000};if(y!=null&&y!=""&&typeof(y)!="undefined"){u.data=easyXDM.getJSONObject().stringify(y)}A.request(u,function(E){var F=E.headers["Content-Type"]=="application/json";var G={data:F?JSON.parse(E.data):E.data,status:E.status};C(D.STATUS_SUCCESS,G)},function(E){var F={message:E.message,status:E.status};C(D.STATUS_ERROR,F)})}function q(u,A,B,C,x,w){var D=this;var v=f.isFunction(f.getCm1License)?f.getCm1License():"";var y={dataType:"xml",async:!B,contentType:"text/xml",type:A,url:u,headers:{"perc-tid":v},success:function(G,F){var E={data:G,textstatus:F};C(D.STATUS_SUCCESS,E)},error:function(H,F,G){if(H.status>0){var E={request:H,textstatus:F,error:G};C(D.STATUS_ERROR,E)}else{if(f.isFunction(w)){w(D.STATUS_ABORT)}}}};if(x){f.extend(y,{data:x})}f.ajax(y)}function g(x,A,C,y,B){var v=this;var u=f.isFunction(f.getCm1License)?f.getCm1License():"";var w={dataType:"text",async:!A,contentType:"text/xml",type:v.TYPE_DELETE,url:x,headers:{"perc-tid":u},success:function(F,E){var D={data:F,textstatus:E};C(v.STATUS_SUCCESS,D)},error:function(G,E,F){if(G.status>0){var D={request:G,textstatus:E,error:F};C(v.STATUS_ERROR,D)}else{if(f.isFunction(B)){B(v.STATUS_ABORT)}}}};if(y){f.extend(w,{data:y})}f.ajax(w)}function n(x){var C="";if(x==null||typeof(x)=="undefined"){return""}if(typeof(x.responseText)=="undefined"&&typeof(x.message)!="undefined"){x.responseText=x.message}if(x.responseText==null||x.responseText.length==0){return""}var w=null;try{w=JSON.parse(x.responseText);if(f.browser.msie&&!w&&typeof(x.responseText)=="string"&&x.responseText.length>0){return x.responseText}}catch(B){}if(w!=null&&w.Errors){var A="";if(typeof(w.defaultMessage)!="undefined"){A=w.defaultMessage}else{if(typeof(w.Errors.globalError.defaultMessage)!="undefined"){A=w.Errors.globalError.defaultMessage}else{if(typeof(w.Errors.localizedMessage)!="undefined"){A=w.Errors.localizedMessage}else{if(typeof(w.Errors.globalError.code)!="undefined"){var y=x.status==500?"Server Error: ":"";A=y+w.Errors.globalError.code}}}}C+=A}else{if(w!=null&&w.ValidationErrors!=undefined){var v=w.ValidationErrors;if(v.fieldErrors!=undefined){C+=l(v.fieldErrors)}else{if(v.globalErrors!=undefined){C+=l(v.globalErrors)}else{if(v.globalError!=undefined){C+=l(v.globalError)}}}}}var u;if(typeof(x.responseText)!="undefined"&&x.responseText.indexOf("<?xml")!=-1){u=f(x.responseText)}else{if(typeof(x)=="string"&&x.indexOf("<?xml")!=-1){u=f(x)}}if(typeof(u)!="undefined"&&u.is("ValidationErrors")){if(u.find("globalErrors").find("defaultMessage").text()!=""){C+=u.find("globalErrors").find("defaultMessage").text()}else{if(u.find("globalError").find("defaultMessage").text()!=""){C+=u.find("globalError").find("defaultMessage").text()!=""}else{if(u.next("defaultMessage")){C+=u.next("defaultMessage")[0].nextSibling.nodeValue}}}}if(C==""){C=x.responseText}return C}function l(u){u=f.makeArray(u);var v="";for(var w=0;w<u.length;w++){var x=u[w];if(x.defaultMessage){v+=t(x.defaultMessage,x.arguments)}else{if(x.code){v+=x.code}}}return v}function t(x,u){u=f.makeArray(u);var w="";for(var v=0;v<u.length;v++){w=new RegExp("\\{"+v+"\\}","g");x=x.replace(w,u[v])}return x}function a(w){var v=JSON.parse(w.responseText);if(v.ValidationErrors==undefined){return""}var u=v.ValidationErrors;if(u.fieldErrors!=undefined){return u.fieldErrors.code}return""}function m(w){var v=JSON.parse(w.responseText);if(v.ValidationErrors==undefined){return""}var u=v.ValidationErrors;if(u.globalError!=undefined){return u.globalError.code}return""}})(jQuery);
/*
 * jQuery BBQ: Back Button & Query Library - v1.1 - 1/9/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,p){var h,q=p.location,m=Array.prototype.slice,s=decodeURIComponent,a=$.param,d,l,w,b=$.bbq=$.bbq||{},r,v,j,f=$.event.special,e="hashchange",C="querystring",F="fragment",A="elemUrlAttr",k="href",u="src",y=/^.*\?|#.*$/g,x=/^.*\#/,E={};function G(H){return typeof H==="string"}function D(I){var H=m.call(arguments,1);return function(){return I.apply(this,H.concat(m.call(arguments)))}}function n(H){return H.replace(/^[^#]*#?(.*)$/,"$1")}function o(H){return H.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function g(J,O,H,K,I){var Q,N,M,P,L;if(K!==h){M=H.match(J?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);L=M[3]||"";if(I===2&&G(K)){N=K.replace(J?x:y,"")}else{P=l(M[2]);K=G(K)?l[J?F:C](K):K;N=I===2?K:I===1?$.extend({},K,P):$.extend({},P,K);N=a(N)}Q=M[1]+(J?"#":N||!M[1]?"?":"")+N+L}else{Q=O(H!==h?H:q[k])}return Q}a[C]=D(g,0,o);a[F]=d=D(g,1,n);$.deparam=l=function(K,H){var J={},I={"true":!0,"false":!1,"null":null};$.each(K.replace(/\+/g," ").split("&"),function(N,S){var M=S.split("="),R=s(M[0]),L,Q=J,O=0,T=R.split("]["),P=T.length-1;if(/\[/.test(T[0])&&/\]$/.test(T[P])){T[P]=T[P].replace(/\]$/,"");T=T.shift().split("[").concat(T);P=T.length-1}else{P=0}if(M.length===2){L=s(M[1]);if(H){L=L&&!isNaN(L)?+L:L==="undefined"?h:I[L]!==h?I[L]:L}if(P){for(;O<=P;O++){R=T[O]===""?Q.length:T[O];Q=Q[R]=O<P?Q[R]||(T[O+1]&&isNaN(T[O+1])?{}:[]):L}}else{if($.isArray(J[R])){J[R].push(L)}else{if(J[R]!==h){J[R]=[J[R],L]}else{J[R]=L}}}}else{if(R){J[R]=H?h:""}}});return J};function B(J,H,I){if(H===h||typeof H==="boolean"){I=H;H=a[J?F:C]()}else{H=G(H)?H.replace(J?x:y,""):H}return l(H,I)}l[C]=D(B,0);l[F]=w=D(B,1);$[A]||($[A]=function(H){return $.extend(E,H)})({a:k,base:k,iframe:u,img:u,input:u,form:"action",link:k,script:u});j=$[A];function t(K,I,J,H){if(!G(J)&&typeof J!=="object"){H=J;J=I;I=h}return this.each(function(){var N=$(this),L=I||j()[(this.nodeName||"").toLowerCase()]||"",M=L&&N.attr(L)||"";N.attr(L,a[K](M,J,H))})}$.fn[C]=D(t,C);$.fn[F]=D(t,F);b.pushState=r=function(K,H){if(G(K)&&/^#/.test(K)&&H===h){H=2}var J=K!==h,I=d(q[k],J?K:{},J?H:2);q[k]=I+(/#/.test(I)?"":"#")};b.getState=v=function(H,I){return H===h||typeof H==="boolean"?w(H):w(I)[H]};b.removeState=function(H){var I={};if(H!==h){I=v();$.each($.isArray(H)?H:arguments,function(K,J){delete I[J]})}r(I,2)};f[e]=$.extend(f[e],{add:function(H,J,I){return function(L){var K=L[F]=d();L.getState=function(M,N){return M===h||typeof M==="boolean"?l(K,M):l(K,N)[M]};H.apply(this,arguments)}}})})(jQuery,this);
/*
 * jQuery hashchange event - v1.0 - 1/9/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,h){var g=h.location,j,k=$.event.special,b="hashchange",e=$.browser,f=e.msie&&e.version<8,d="on"+b in h&&!f;function a(l){l=l||g.href;return l.replace(/^[^#]*#?(.*)$/,"$1")}$[b+"Delay"]=100;k[b]=$.extend(k[b],{setup:function(){if(d){return false}j.start()},teardown:function(){if(d){return false}j.stop()}});j=(function(){var l={},q,m,n,p;function o(){n=p=function(r){return r};if(f){m=$('<iframe src="javascript:0"/>').hide().appendTo("body")[0].contentWindow;p=function(){return a(m.document.location.href)};n=function(t,r){if(t!==r){var s=m.document;s.open().close();s.location.hash="#"+t}};n(a())}}l.start=function(){if(q){return}var s=a();n||o();(function r(){var u=a(),t=p(s);if(u!==s){n(s=u,t);$(h).trigger(b)}else{if(t!==s){g.href=g.href.replace(/#.*/,"")+"#"+t}}q=setTimeout(r,$[b+"Delay"])})()};l.stop=function(){if(!m){q&&clearTimeout(q);q=0}};return l})()})(jQuery,this);jQuery.getFeed=function(a){a=jQuery.extend({url:null,data:null,success:null},a);if(a.url){$.ajax({type:"GET",url:a.url,data:a.data,dataType:"xml",success:function(b){var d=new JFeed(b);if(jQuery.isFunction(a.success)){a.success(d)}}})}};function JFeed(a){if(a){this.parse(a)}}JFeed.prototype={type:"",version:"",title:"",link:"",description:"",parse:function(a){if(jQuery("channel",a).length==1){this.type="rss";var b=new JRss(a)}else{if(jQuery("feed",a).length==1){this.type="atom";var b=new JAtom(a)}}if(b){jQuery.extend(this,b)}}};function JFeedItem(){}JFeedItem.prototype={title:"",link:"",description:"",updated:"",id:""};function JAtom(a){this._parse(a)}JAtom.prototype={_parse:function(a){var b=jQuery("feed",a).eq(0);this.version="1.0";this.title=jQuery(b).find("title:first").text();this.link=jQuery(b).find("link:first").attr("href");this.description=jQuery(b).find("subtitle:first").text();this.language=jQuery(b).attr("xml:lang");this.updated=jQuery(b).find("updated:first").text();this.items=new Array();var d=this;jQuery("entry",a).each(function(){var e=new JFeedItem();e.title=jQuery(this).find("title").eq(0).text();e.link=jQuery(this).find("link").eq(0).attr("href");e.description=jQuery(this).find("content").eq(0).text();e.updated=jQuery(this).find("updated").eq(0).text();e.id=jQuery(this).find("id").eq(0).text();d.items.push(e)})}};function JRss(a){this._parse(a)}JRss.prototype={_parse:function(a){if(jQuery("rss",a).length==0){this.version="1.0"}else{this.version=jQuery("rss",a).eq(0).attr("version")}var b=jQuery("channel",a).eq(0);this.title=jQuery(b).find("title:first").text();this.link=jQuery(b).find("link:first").text();this.description=jQuery(b).find("description:first").text();this.language=jQuery(b).find("language:first").text();this.updated=jQuery(b).find("lastBuildDate:first").text();this.items=new Array();var d=this;jQuery("item",a).each(function(){var e=new JFeedItem();e.title=jQuery(this).find("title").eq(0).text();e.link=jQuery(this).find("link").eq(0).text();e.description=jQuery(this).find("description").eq(0).text();e.updated=jQuery(this).find("pubDate").eq(0).text();e.id=jQuery(this).find("guid").eq(0).text();d.items.push(e)})}};(function(e){var b=null;var d=function(h,g){var j=this.get(0);if(b===null){f()}j.totalPages=1;j.totalEntries=0;if(!(parseInt(j.settings.maxResults,10)>0)){j.settings.maxResults=parseInt(e.parseJSON(this.attr("data")).maxResults,10);if(isNaN(j.settings.maxResults)||j.settings.maxResults<1){j.settings.maxResults=0}}quickNav(j,1,h,g);return this};var a=function(m,k,n,h){currDiv=e(m);var l=currDiv.find(".perc-pagination-container");if(l.length>0){l.replaceWith(b.clone())}else{currDiv.append(b.clone())}if(m.totalPages<=1||!(parseInt(m.totalPages,10)===m.totalPages)){currDiv.find(".perc-pagination-container").hide();return}else{currDiv.find(".perc-pagination-container").show()}k=+k;currDiv.find(".perc-current-page").removeClass("perc-current-page");if(k<1){k=1}else{if(k>m.totalPages){k=m.totalPages}}var g=3;var j=".perc-third";if(m.totalPages>=5){if(k<3){g=3;if(k===1){j=".perc-first"}else{if(k===2){j=".perc-second"}}}else{if(k>(m.totalPages-2)){g=m.totalPages-2;if(k===m.totalPages){j=".perc-fifth"}else{if(k===(m.totalPages-1)){j=".perc-fourth"}}}else{g=k;j=".perc-third"}}}else{g=3;if(k===1){j=".perc-first"}else{if(k===2){j=".perc-second"}else{if(k===3){j=".perc-third"}else{j=".perc-fourth"}}}}currDiv.find(".perc-goto").hide().removeClass("perc-comma-after");if(m.totalPages>=2){currDiv.find(".perc-goto-first").unbind("click").click(function(){quickNav(m,1,n,h)});currDiv.find(".perc-goto-pre").unbind("click").click(function(){quickNav(m,k-1,n,h)});currDiv.find(".perc-first").show().text(g-2).unbind("click").click(function(){quickNav(m,g-2,n,h)}).addClass("perc-comma-after");currDiv.find(".perc-second").show().text(g-1).unbind("click").click(function(){quickNav(m,g-1,n,h)})}if(m.totalPages>=3){currDiv.find(".perc-second").addClass("perc-comma-after");currDiv.find(".perc-third").show().text(g+0).unbind("click").click(function(){quickNav(m,g+0,n,h)})}if(m.totalPages>=4){currDiv.find(".perc-third").addClass("perc-comma-after");currDiv.find(".perc-fourth").show().text(g+1).unbind("click").click(function(){quickNav(m,g+1,n,h)})}if(m.totalPages>=5){currDiv.find(".perc-fourth").addClass("perc-comma-after");currDiv.find(".perc-fifth").show().text(g+2).unbind("click").click(function(){quickNav(m,g+2,n,h)})}if(m.totalPages>=2){currDiv.find(".perc-goto-next").unbind("click").click(function(){quickNav(m,k+1,n,h)});currDiv.find(".perc-goto-last").unbind("click").click(function(){quickNav(m,m.totalPages,n,h)})}currDiv.find(j).addClass("perc-current-page");currDiv.find(".perc-page-count .perc-page-count-current").text(k+" "+m.settings.pagingOfText);currDiv.find(".perc-page-count .perc-page-count-total").text(m.totalPages+" "+m.settings.pagingPagesText)};quickNav=function(k,h,m,g){if(h>k.totalPages){h=k.totalPages}else{if(h<1){h=1}}function l(n,o){if(parseInt(n.totalEntries,10)>0){k.totalEntries=parseInt(n.totalEntries,10)}k.totalPages=Math.ceil((k.totalEntries/k.settings.maxResults));a(k,h,m,g)}var j=m(k,h,g,l)};function f(){var g=e("<div />").addClass("perc-pagination-container").append(e("<span />").addClass("perc-page-count").append(e("<span />").addClass("perc-page-count-current")).append(" ").append(e("<span />").addClass("perc-page-count-total"))).append(e("<span />").addClass("perc-page-nav").append(e("<span />").addClass("perc-goto-quick-nav").addClass("perc-goto-first")).append(e("<span />").addClass("perc-goto-quick-nav").addClass("perc-goto-pre")).append(e("<span />").addClass("perc-goto").addClass("perc-first")).append(e("<span />").addClass("perc-goto").addClass("perc-second")).append(e("<span />").addClass("perc-goto").addClass("perc-third")).append(e("<span />").addClass("perc-goto").addClass("perc-fourth")).append(e("<span />").addClass("perc-goto").addClass("perc-fifth")).append(e("<span />").addClass("perc-goto-quick-nav").addClass("perc-goto-next")).append(e("<span />").addClass("perc-goto-quick-nav").addClass("perc-goto-last")));b=g}e.fn.PercResultsPaging=d})(jQuery);(function(b){b.PercArchiveListService={getArchiveEntries:a};function a(j,h){var g="";try{if(j.deliveryurl!=undefined){g=j.deliveryurl;delete j.deliveryurl}}catch(e){var d=""}var f=g+"/perc-metadata-services/metadata/blogs/get";b.PercServiceUtils.makeXdmJsonRequest(null,f,b.PercServiceUtils.TYPE_POST,function(k,l){if(k==b.PercServiceUtils.STATUS_SUCCESS){h(true,l.data)}else{var m=b.PercServiceUtils.extractDefaultErrorMessage(l.request);h(false,m)}},j)}})(jQuery);(function(b){b.PercBlogListService={getPageEntries:a};function a(j,h){var g="";try{if(j.deliveryurl!=undefined){delete j.deliveryurl}}catch(e){var d=""}var f="/perc-metadata-services/metadata/get";return b.PercServiceUtils.makeXdmJsonRequest(null,f,b.PercServiceUtils.TYPE_POST,function(k,l){if(k==b.PercServiceUtils.STATUS_SUCCESS){h(true,l.data)}else{var m=b.PercServiceUtils.extractDefaultErrorMessage(l.request);h(false,m)}},j)}})(jQuery);(function(b){b.PercBlogPostService={getPostNavEntries:a};function a(l,f,k){var d="?currentPageId="+f;var j="";try{if(l.deliveryurl!=undefined){j=l.deliveryurl;delete l.deliveryurl}}catch(g){var e=""}var h=j+"/perc-metadata-services/metadata/blog/getCurrent"+d;b.PercServiceUtils.makeXdmJsonRequest(null,h,b.PercServiceUtils.TYPE_POST,function(m,n){if(m==b.PercServiceUtils.STATUS_SUCCESS){k(true,n.data)}else{var o=b.PercServiceUtils.extractDefaultErrorMessage(n.request);k(false,o)}},l)}})(jQuery);(function(a){a.PercCategoryListService={getCategories:b};function b(j,h){var g="";try{if(j.deliveryurl!=undefined){g=j.deliveryurl;delete j.deliveryurl}}catch(e){var d=""}var f=g+"/perc-metadata-services/metadata/categories/get";a.PercServiceUtils.makeXdmJsonRequest(null,f,a.PercServiceUtils.TYPE_POST,function(k,l){if(k==a.PercServiceUtils.STATUS_SUCCESS){h(true,l.data)}else{var m=a.PercServiceUtils.extractDefaultErrorMessage(l.request);h(false,m)}},j)}})(jQuery);(function(h){var m="/perc-comments-services/likes/";var q={PERC_TYPE_PAGE:"PAGE",PERC_TYPE_COMMENT:"COMMENT",PERC_TYPE_IMAGE:"IMAGE",PERC_ONE_YEAR:365};var o=function(r){if(typeof(r)==="undefined"||r===null){return false}likePathname=d(window.location.pathname);a(this.siteName,likePathname,q.PERC_TYPE_PAGE,r)};var a=function(r,v,s,u){var t=m+"like/"+r+"/"+s+"/"+v;h.PercServiceUtils.makeXdmJsonRequest(null,t,h.PercServiceUtils.TYPE_POST,function(w,x){if(w==h.PercServiceUtils.STATUS_SUCCESS){var y={url:r,totalLikes:x.data};n(true,y.url);u(true,y)}else{u(false,null)}})};var l=function(r){if(typeof(r)==="undefined"||r===null){return false}likePathname=d(window.location.pathname);e(this.siteName,likePathname,q.PERC_TYPE_PAGE,r)};var e=function(r,v,s,u){var t=m+"unlike/"+r+"/"+s+"/"+v;h.PercServiceUtils.makeXdmJsonRequest(null,t,h.PercServiceUtils.TYPE_POST,function(w,x){if(w==h.PercServiceUtils.STATUS_SUCCESS){var y={url:r,totalLikes:x.data};n(false,y.url);u(true,y)}else{u(false,null)}})};var f=function(r){likePathname=d(window.location.pathname);b(this.siteName,likePathname,q.PERC_TYPE_PAGE,r)};var b=function(r,v,s,u){var t=m+"total/"+r+"/"+s+"/"+v;h.PercServiceUtils.makeXdmJsonRequest(null,t,h.PercServiceUtils.TYPE_POST,function(w,x){if(w==h.PercServiceUtils.STATUS_SUCCESS){var y={url:r,totalLikes:x.data};u(true,y)}else{u(false,null)}})};var k=function(){var r=window.location.pathname;return p(window.location.protocol+"//"+this.siteName+d(r))};var p=function(s){if(typeof(s)==="undefined"||s===null){return false}var r=h.cookie(s);if(r===null){return false}if(r.toLowerCase()==="true"){return true}else{return false}};var d=function(s){var t="";if(s.lastIndexOf(".")!=-1){t=s.substring(0,s.lastIndexOf("."))}if((s=="/")||(s==="/index")||(t==="/index")||(s==="/home")||(s==="/default")){t="/";return t}else{var r=s.lastIndexOf("index");if(r!=-1){t=s.substring(0,r)}else{t=s}}return t};var n=function(r,s){if(typeof(r)==="undefined"||r===null){return false}return j(window.location.protocol+"//"+s+d(window.location.pathname),r)};var j=function(s,t){if(typeof(s)==="undefined"||s===null){return false}if(typeof(t)==="undefined"||t===null){return false}var r=null;if(t===true){r="true"}else{if(t===false){r=null}}h.cookie(s,r,{expires:q.PERC_ONE_YEAR})};var g={constants:q,like:a,likeThis:o,unlike:e,unlikeThis:l,getTotalLikesForThisPage:f,getTotalLikes:b,isThisLiked:k,isLiked:p,setThisLiked:n,setLiked:j};h.PercLikedService=g})(jQuery);(function(h){h.ajaxSetup({cache:false});h.PercMembershipService={register:f,getUser:g,login:b,validateResetPwKey:a,resetPassword:j,resetPwRequest:d,confirmRegistration:e};function f(k,m){var l="/perc-membership-services/membership/user";h.PercServiceUtils.makeXdmJsonRequest(null,l,h.PercServiceUtils.TYPE_POST,function(n,o){if(n==h.PercServiceUtils.STATUS_SUCCESS){m(n,o.data)}else{var p=h.PercServiceUtils.extractDefaultErrorMessage(o.request);m(n,p)}},k)}function g(l,m){var k="/perc-membership-services/membership/session/"+l;h.PercServiceUtils.makeXdmJsonRequest(null,k,h.PercServiceUtils.TYPE_GET,function(n,o){if(n==h.PercServiceUtils.STATUS_SUCCESS){m(n,o.data)}else{var p=h.PercServiceUtils.extractDefaultErrorMessage(o.request);m(n,p)}})}function b(k,m){var l="/perc-membership-services/membership/login";h.PercServiceUtils.makeXdmJsonRequest(null,l,h.PercServiceUtils.TYPE_POST,function(n,o){if(n==h.PercServiceUtils.STATUS_SUCCESS){m(n,o.data)}else{var p=h.PercServiceUtils.extractDefaultErrorMessage(o.request);m(n,p)}},k)}function j(k,o,l,p){var n="/perc-membership-services/membership/pwd/reset/"+l;var m={email:k,password:o};h.PercServiceUtils.makeXdmJsonRequest(null,n,h.PercServiceUtils.TYPE_POST,function(q,r){if(q==h.PercServiceUtils.STATUS_SUCCESS){p(q,r.data)}else{var s=h.PercServiceUtils.extractDefaultErrorMessage(r.request);p(q,s)}},m)}function d(k,o,n){var m="/perc-membership-services/membership/pwd/requestReset";o=window.location.protocol+"//"+window.location.host+o;var l={email:k,redirectPage:o};h.PercServiceUtils.makeXdmJsonRequest(null,m,h.PercServiceUtils.TYPE_POST,function(p,q){if(p==h.PercServiceUtils.STATUS_SUCCESS){n(p,q.data)}else{var r=h.PercServiceUtils.extractDefaultErrorMessage(q.request);n(p,r)}},l)}function a(k,m){var l="/perc-membership-services/membership/pwd/validate/"+k;h.PercServiceUtils.makeXdmJsonRequest(null,l,h.PercServiceUtils.TYPE_POST,function(n,o){if(n==h.PercServiceUtils.STATUS_SUCCESS){m(n,o.data)}else{var p=h.PercServiceUtils.extractDefaultErrorMessage(o.request);m(n,p)}})}function e(k,m){var l="/perc-membership-services/membership/registration/confirm/"+k;h.PercServiceUtils.makeXdmJsonRequest(null,l,h.PercServiceUtils.TYPE_POST,function(n,o){if(n==h.PercServiceUtils.STATUS_SUCCESS){m(n,o.data)}else{var p=h.PercServiceUtils.extractDefaultErrorMessage(o.request);m(n,p)}})}})(jQuery);(function(b){b.PercPageListService={getPageEntries:a};function a(j,h){var g="";try{if(j.deliveryurl!=undefined){g=j.deliveryurl;delete j.deliveryurl}}catch(e){var d=""}var f=g+"/perc-metadata-services/metadata/get";b.PercServiceUtils.makeXdmJsonRequest(null,f,b.PercServiceUtils.TYPE_POST,function(k,l){if(k==b.PercServiceUtils.STATUS_SUCCESS){h(true,l.data.results)}else{var m=b.PercServiceUtils.extractDefaultErrorMessage(l.request);h(false,m)}},j)}})(jQuery);(function(b){b.PercResultService={getPageEntries:a};function a(j,h){var g="";try{if(j.deliveryurl!=undefined){delete j.deliveryurl}}catch(e){var d=""}var f="/perc-metadata-services/metadata/get";return b.PercServiceUtils.makeXdmJsonRequest(null,f,b.PercServiceUtils.TYPE_POST,function(k,l){if(k==b.PercServiceUtils.STATUS_SUCCESS){h(true,l.data)}else{var m=b.PercServiceUtils.extractDefaultErrorMessage(l.request);h(false,m)}},j)}})(jQuery);(function(b){b.PercRssService={getExternalFeed:a};function a(k,j,h){var g="";try{if(j.deliveryurl!=undefined){g=j.deliveryurl;delete j.deliveryurl}}catch(e){var d=""}var f=g+"/feeds/rss/readExternalFeed?feedUrl="+k;b.PercServiceUtils.makeXmlRequest(f,b.PercServiceUtils.TYPE_GET,true,function(l,m){if(l==b.PercServiceUtils.STATUS_SUCCESS){h(true,m.data)}else{var n=b.PercServiceUtils.extractDefaultErrorMessage(m.request);h(false,n)}})}})(jQuery);(function(b){b.PercTagListService={getTagEntries:a};function a(l,j,k){var f="?sortTagsBy="+j;var h="";try{if(l.deliveryurl!=undefined){h=l.deliveryurl;delete l.deliveryurl}}catch(e){var d=""}var g=h+"/perc-metadata-services/metadata/tags/get"+f;b.PercServiceUtils.makeXdmJsonRequest(null,g,b.PercServiceUtils.TYPE_POST,function(m,n){if(m==b.PercServiceUtils.STATUS_SUCCESS){k(true,n.data)}else{var o=b.PercServiceUtils.extractDefaultErrorMessage(n.request);k(false,o)}},l)}})(jQuery);(function($){$(document).ready(function(){$.PercArchiveListView.updateArchiveList()});$.PercArchiveListView={updateArchiveList:updateArchiveList};function updateArchiveList(){$(".perc-archive-list").each(function(){var currentArchiveList=$(this);if(currentArchiveList.attr("data")===""){return}var queryString=eval("("+currentArchiveList.attr("data")+")");var renderOption=queryString.layout;delete queryString.layout;var pageResult=queryString.archive_page_result;delete queryString.archive_page_result;var numberEntries=queryString.numberEntries;delete queryString.numberEntries;var baseURL=window.location.protocol+"//"+window.location.host;var strJSON=JSON.stringify(queryString);$.PercArchiveListService.getArchiveEntries(queryString,function(status,archiveList){if(status){if(typeof(renderOption)!="undefined"&&renderOption!=""&&renderOption=="perc-list-hierarchical"){var itemToList=archiveList.years.length;if(typeof(numberEntries)!="undefined"&&numberEntries!=""){if(archiveList.years.length<numberEntries){itemToList=archiveList.years.length}else{itemToList=numberEntries}}var ul=$("<ul>").addClass("perc-archive-list-wrapper perc-archive-hierarchical");for(var i=0;i<itemToList;i++){var row=archiveList.years[i];if(row.yearCount>0){var linkYearText=row.year+" ("+row.yearCount+")";var yearParam1=row.year+"-01-01 00:00:00";var yearParam2=row.year+"-12-31 00:00:00";if(typeof(pageResult)!="undefined"&&pageResult!=""){var query=eval("("+strJSON+")");query.criteria.push("dcterms:created >= '"+yearParam1+"'");query.criteria.push("dcterms:created <= '"+yearParam2+"'");var encodedQuery="&query="+encodeURIComponent(JSON.stringify(query));var anchorYear=$("<a>").attr("href",baseURL+pageResult+"?filter="+row.year+encodedQuery).text(linkYearText)}else{var anchorYear=$("<a href='#'>").text(linkYearText)}var yearLi=$("<li>").addClass("perc-archive-year").append(anchorYear);var monthsUl=$("<ul class='perc-archive-month-wrapper'/>");var monthIndex=12;if(i==0){monthIndex=archiveList.years[i].months.length}for(var j=0;j<archiveList.years[i].months.length;j++){var row2=archiveList.years[i].months[j];if(row2.count<1){monthIndex=monthIndex-1;continue}var stringMonthParam="";if(monthIndex>=10){stringMonthParam=monthIndex}else{stringMonthParam="0"+monthIndex}var daysInMonth=new Date(row.year,monthIndex,0).getDate();var dateParam1=row.year+"-"+stringMonthParam+"-01 00:00:00";var dateParam2=row.year+"-"+stringMonthParam+"-"+daysInMonth+" 00:00:00";var linkText=row2.month+" ("+row2.count+")";if(monthIndex>0){monthIndex=monthIndex-1}if(typeof(pageResult)!="undefined"&&pageResult!=""){var query=eval("("+strJSON+")");query.criteria.push("dcterms:created >= '"+dateParam1+"'");query.criteria.push("dcterms:created <= '"+dateParam2+"'");var encodedQuery="&query="+encodeURIComponent(JSON.stringify(query));var a=$("<a>").attr("href",baseURL+pageResult+"?filter="+row2.month+" "+row.year+encodedQuery).text(linkText)}else{var a=$("<a href='#'>").text(linkText)}var li=$("<li>").addClass("perc-archive-month").append(a);monthsUl.append(li)}yearLi.append(monthsUl);ul.append(yearLi)}else{}}currentArchiveList.find(".perc-archive-list-container").html("").append(ul)}else{if(typeof(numberEntries)!="undefined"&&numberEntries!=""){var flatItemToList=numberEntries}var listCounter=0;var ul=$("<ul>").addClass(".perc-archive-list-wrapper perc-archive-flat");for(var i=0;i<archiveList.years.length;i++){var row=archiveList.years[i];var monthIndex=12;if(i==0){monthIndex=archiveList.years[i].months.length}for(var j=0;j<archiveList.years[i].months.length;j++){var row2=archiveList.years[i].months[j];if(row2.count<1){monthIndex=monthIndex-1;continue}var stringMonthParam="";if(monthIndex>=10){stringMonthParam=monthIndex}else{stringMonthParam="0"+monthIndex}var daysInMonth=new Date(row.year,monthIndex,0).getDate();var dateParam1=row.year+"-"+stringMonthParam+"-01 00:00:00";var dateParam2=row.year+"-"+stringMonthParam+"-"+daysInMonth+" 00:00:00";var linkText=row2.month+" "+row.year+" ("+row2.count+")";if(monthIndex>0){monthIndex=monthIndex-1}if(typeof(pageResult)!="undefined"&&pageResult!=""){var query=eval("("+strJSON+")");query.criteria.push("dcterms:created >= '"+dateParam1+"'");query.criteria.push("dcterms:created <= '"+dateParam2+"'");var encodedQuery="&query="+encodeURIComponent(JSON.stringify(query));var a=$("<a>").attr("href",baseURL+pageResult+"?filter="+row2.month+" "+row.year+encodedQuery).text(linkText)}else{var a=$("<a href = '#'>").text(linkText)}var li=$("<li>").addClass("perc-archive-month").append(a);ul.append(li);listCounter=listCounter+1;if(listCounter==flatItemToList&&typeof(numberEntries)!="undefined"&&numberEntries!=""){break}}if(listCounter==flatItemToList&&typeof(numberEntries)!="undefined"&&numberEntries!=""){break}}currentArchiveList.find(".perc-archive-list-container").html("").append(ul)}}else{}})})}})(jQuery);(function(f){f(document).ready(function(){f.PercBlogListView.updatePageLists()});f.PercBlogListView={updatePageLists:e};function g(q,m,s,l){var n=f(q);if(!q.settings){q.settings={}}if(isNaN(q.settings.maxResults)||q.settings.maxResults<1){q.settings.maxResults=0}q.settings.query.maxResults=q.settings.maxResults;q.settings.query.startIndex=(q.settings.maxResults*(m-1));q.settings.baseURL=window.location.protocol+"//"+window.location.host+window.location.pathname;var r=f.deparam.querystring();if(r.query!=undefined&&r.filter!=undefined){try{var p=f.parseJSON(r.query);f.map(p.criteria,function(u,t){if(f.inArray(u,q.settings.query.criteria)==-1){q.settings.query.criteria[q.settings.query.criteria.length]=u}})}catch(o){}}return f.PercBlogListService.getPageEntries(q.settings.query,function(t,u){if(t){s(q,u,l)}else{if(console){console.log(u)}}})}function h(o,n,l){if(n.totalEntries){o.totalPages=Math.ceil(n.totalEntries/o.settings.maxResults);o.totalEntries=n.totalEntries}var m=n.results;j(o,m,l)}function j(F,r,o){var B=f(F);if(!(r.length>0)){B.find(".perc-no-post").show()}else{B.find(".perc-no-post").hide()}var q=f.deparam.querystring();if(q.query!=undefined&&q.filter!=undefined){try{f.parseJSON(q.query);var w=f.parseJSON(B.attr("titleData"));B.parent().find(".perc-result-divider").remove();B.parent().find(".perc-bloglist-result-container").remove();B.parent().prepend('<div class="perc-result-divider"></div>').prepend(k(w.resultsTitle+" "+q.filter,F.totalEntries))}catch(C){}}var t=B.find(".perc-blog-list-structure .perc-blog-list");var x=t.find("li").clone();t=t.clone().empty();B.find(".perc-blog-list").not(".perc-blog-list-structure .perc-blog-list").empty().remove();scroll(0,0);B.prepend(t);for(var A=0;A<r.length;A++){var v=r[A];var n=x.clone();var y=A%2===0?"perc-list-even":"perc-list-odd";var l=A===0?"perc-list-first":A===r.length-1?"perc-list-last":"";n.addClass(y);if(l!==""){n.addClass(l)}var u=null;var p=null;var m=null;var E=null;var s=null;f.each(v.properties,function(G,H){if(G=="dcterms:abstract"){u=H.replace('<A xmlns="http://www.w3.org/1999/xhtml" xmlns:perc="http://percussion.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" class="perc-more-link"></A>',"&nbsp;"+f("<a />").attr("class","perc-no-update-link-text perc-blog-list-more-link").attr("href",v.folder+v.name).text(F.settings.blogPostReadMoreText).appendTo("<div />").parent().html())}else{if(G=="dcterms:author"){p=H}else{if(G=="dcterms:created"){m=F.settings.dateFormatter.format(f.timeago.parse(H))}else{if(G=="perc:tags"){E=b(H,F)}else{if(G=="perc:category"){s=a(H,F)}}}}}});var D=v.linktext;n.find("a").attr("href",v.folder+v.name).not(".perc-no-update-link-text").html(D);if(u){n.find("div.perc-blog-list-summary-container").prepend(u)}if(E){n.find("div.perc-blog-list-tag-container").append(E)}else{n.find("div.perc-blog-list-tag-container").addClass("perc-blog-hide-container")}if(s){n.find("div.perc-blog-list-category-container").append(s)}else{n.find("div.perc-blog-list-category-container").addClass("perc-blog-hide-container")}if(p){n.find(".perc-blog-list-byline-container").text("by "+p)}if(m){n.find(".perc-blog-list-date-container").text(m)}t.append(n);B.find(".perc-list-main-wrapper").append(t)}}function b(o,p){if(typeof(o)=="string"){o=o.split()}o=o.sort();var n="";for(i=0;i<o.length;i++){var m={criteria:["perc:tags = '"+o[i]+"'"]};var l="&query="+encodeURIComponent(JSON.stringify(m));sep=(i==o.length-1)?"":",";n+='<a href="'+p.settings.baseURL+"?filter="+o[i]+l+'">'+o[i]+sep+" </a>"}return n}function a(n,o){if(typeof(n)=="string"){n=n.split()}n=n.sort(d);strReturn="";for(i=0;i<n.length;i++){var m={criteria:["perc:category = '"+n[i]+"'"]};var l="&query="+encodeURIComponent(JSON.stringify(m));sep=(i==n.length-1)?"":",";cat=n[i].split("/");strReturn+='<a href="'+o.settings.baseURL+"?filter="+cat[cat.length-1]+l+'">'+cat[cat.length-1]+sep+" </a>"}return strReturn}function d(m,l){m=m.split("/");l=l.split("/");if(m[m.length-1]==l[l.length-1]){return 0}if(m[m.length-1]>l[l.length-1]){return 1}return -1}function k(n,l){var m=f("<div/>").append(f("<h2/>").addClass("perc-bloglist-result-title").text(n)).append(f("<p/>").addClass("perc-bloglist-result-count").text(l+(l==1?" entry":" entries"))).addClass("perc-bloglist-result-container");return m}function e(){f(".perc-blog-list-container").each(function(){var m=function(q,o,n,p){return g(q,o,function(s,r){h(s,r,n);p(s,r)},n)};this.settings={criteria:[],dateformat:"EEE MMM d, yyyy 'at' hh:mm a",dateFormatter:null,summary:null,filter:null,query:{},blogPostReadMoreText:"more...",pagingPagesText:"pages",pagingOfText:"of",totalEntries:0};var l={};this.settings.query.criteria=[];f.extend(this.settings,f.parseJSON(f(this).attr("data")));this.settings.query=f.extend(true,{},this.settings.query);this.settings.query.criteria=this.settings.query.criteria.concat(this.settings.criteria);this.settings.query.maxResults=this.settings.maxResults;if(typeof(this.settings.orderBy)!="undefined"){this.settings.query.orderBy=this.settings.orderBy}this.settings.dateFormatter=new SimpleDateFormat(this.settings.dateFormat);f(this).PercResultsPaging(m,l)})}})(jQuery);(function($){$(document).ready(function(){$.PercBlogPostView.updateBlogNav();$.PercBlogPostView.updateBlogLink()});$.PercBlogPostView={updateBlogNav:updateBlogNav,updateBlogLink:updateBlogLink};function updateBlogNav(){$(".perc-blog-navigation-container").each(function(){var currentBlogNavigation=$(".perc-blog");if(currentBlogNavigation.attr("data")===""){return}var queryString=eval("("+currentBlogNavigation.attr("data")+")");var blogNavText=queryString.navType;delete queryString.navType;var blogPostNextPost=queryString.blogPostNextPost;delete queryString.blogPostNextPost;var blogPostPrePost=queryString.blogPostPrePost;delete queryString.blogPostPrePost;var folderPath=queryString.folderPath;delete queryString.folderPath;var siteName=queryString.siteName;delete queryString.siteName;var pagePath="/"+siteName+window.location.pathname;if(!(queryString.criteria.length)){$(".perc-blog").find(".perc-blog-nav-left-wrapper , .perc-blog-nav-right-wrapper").hide();return}$.PercBlogPostService.getPostNavEntries(queryString,pagePath,function(status,navEntries){if(status){if(navEntries.next!=null){$(".perc-newer-post-wrapper a").attr("href",navEntries.next.pagepath.replace("/"+siteName,""));if(blogNavText=="blogTitle"){$(".perc-newer-post-title").text(navEntries.next.linktext)}else{$(".perc-newer-post").text(blogPostNextPost)}}else{$(".perc-blog").find(".perc-blog-nav-right-wrapper").html("&nbsp;")}if(navEntries.previous!=null){$(".perc-older-post-wrapper a").attr("href",navEntries.previous.pagepath.replace("/"+siteName,""));if(blogNavText=="blogTitle"){$(".perc-older-post-title").text(navEntries.previous.linktext)}else{$(".perc-older-post").text(blogPostPrePost)}}else{$(".perc-blog").find(".perc-blog-nav-left-wrapper").html("&nbsp;")}}else{$(".perc-blog").find(".perc-blog-nav-left-wrapper , .perc-blog-nav-right-wrapper").hide()}})})}function updateBlogLink(){$(".perc-blog-wrapper").each(function(){var currentBlogNavigation=$(".perc-blog");if(currentBlogNavigation.attr("data")===""){return}var queryString=eval("("+currentBlogNavigation.attr("data")+")");var siteName="/"+queryString.siteName;var folderPath=queryString.folderPath;var blogIndexPage=folderPath.replace(siteName,"")+"/index";$(".perc-blog-post-tag-container").find("a").each(function(){var tag=($.trim($(this).html())).replace(",","");var jsonQuery={criteria:["perc:tags LIKE '"+tag+"'"]};var encodedQuery="&query="+encodeURIComponent(JSON.stringify(jsonQuery));$(this).attr("href",blogIndexPage+"?filter="+tag+encodedQuery)});$(".perc-blog-post-category-container").find("a").each(function(){var categoryPath=$(this).attr("data");var category=($.trim($(this).html())).replace(",","");var jsonQuery={criteria:["perc:category LIKE '"+categoryPath+"'"]};var encodedQuery="&query="+encodeURIComponent(JSON.stringify(jsonQuery));$(this).attr("href",blogIndexPage+"?filter="+category+encodedQuery)})})}})(jQuery);var strJSON;var pageResult;var baseURL;(function($){$(document).ready(function(){$.PercCategoryListView.updateCategoryList()});$.PercCategoryListView={updateCategoryList:updateCategoryList};var pageResult;var baseURL;var strJSON;var nRow;function updateCategoryList(){$(".perc-category-list").each(function(){var currentCategoryList=$(this);var queryString=eval("("+currentCategoryList.attr("data")+")");pageResult=queryString.category_page_result;delete queryString.category_page_result;var display=queryString.display_option;delete queryString.display_option;var maxCat=queryString.max_categories;delete queryString.max_categories;baseURL=window.location.protocol+"//"+window.location.host;strJSON=JSON.stringify(queryString);nRow=0;$.PercCategoryListService.getCategories(queryString,function(status,categoryEntries){currentCategoryList.find(".perc-category-list-expanded,.perc-category-list-collapsible").empty();currentCategoryList.find(".perc-category-list-collapsible").dynatree("destroy");if(status&&categoryEntries.length>0){var ul="";if(display=="collapsible"){ul=createNestedUlLiTreeCollapsible(categoryEntries,"",maxCat,0);currentCategoryList.find(".perc-category-list-collapsible").html(ul);currentCategoryList.find(".perc-category-list-collapsible").dynatree({minExpandLevel:2,onActivate:function(node){var href=$(node.data.title).attr("href");var count=$(node.data.title).attr("data");if(count>0){window.location.href=href}}})}else{ul=createNestedUlLiTreeExpanded(categoryEntries,"",maxCat,0);currentCategoryList.find(".perc-category-list-expanded").html(ul)}}else{if(status&&categoryEntries.length==0){}else{}}})})}function createNestedUlLiTreeExpanded(treeNodes,parentPath,maxRow,nLevel){var ul="";if(maxRow>nRow||maxRow==0){ul=$("<ul>").addClass("perc-category-elements").addClass("perc-category-level"+nLevel);for(var n=0;n<treeNodes.length;n++){if(maxRow>nRow||maxRow==0){var node=treeNodes[n];node.path=parentPath+"/"+node.category;var li=parseNode(node,nLevel);ul.append(li);nRow++;if(node.children&&node.children.length>0){li.append(createNestedUlLiTreeExpanded(node.children,node.path,maxRow,nLevel+1))}}}}return ul}function createNestedUlLiTreeCollapsible(treeNodes,parentPath,maxRow,nLevel){var ul="";ul=$("<ul>").addClass("perc-category-elements").addClass("perc-category-level"+nLevel);for(var n=0;n<treeNodes.length;n++){if((nLevel!=1||n<maxRow)||maxRow==0){var node=treeNodes[n];node.path=parentPath+"/"+node.category;var li=parseNode(node);ul.append(li);if(node.children&&node.children.length>0){li.append(createNestedUlLiTreeCollapsible(node.children,node.path,maxRow,nLevel+1))}}}return ul}function parseNode(node){var countTotal=node.count.first+node.count.second;var nodeStr=node.category+" ("+countTotal+")";var query=eval("("+strJSON+")");query.criteria.push("perc:category LIKE '"+node.path+"%'");var encodedQuery="&query="+encodeURIComponent(JSON.stringify(query));var href="#";if(typeof(pageResult)!="undefined"&&pageResult!=""){var href=baseURL+pageResult+"?filter="+node.category+encodedQuery}var a=$("<a>").attr("href",href).attr("data",countTotal).attr("title",nodeStr).addClass("perc-node").append(nodeStr);var li=$("<li>").addClass("perc-category-element").append(a);return li}})(jQuery);(function($){var deliveryServicesURL="";var currentWidgetCssDefinition="";function getDeliveryServicesDomain(widgetClass){var currentWidget=$(widgetClass);var queryString="";var deliveryUrl="";try{queryString=eval("("+currentWidget.attr("data")+")");if(queryString.deliveryurl!=undefined){deliveryUrl=queryString.deliveryurl;delete queryString.deliveryurl}}catch(err){var _do=""}return deliveryUrl}$(document).ready(function(){deliveryServicesURL=getDeliveryServicesDomain(".perc-comments-view");var tenantId=$.isFunction($.getCm1License)?$.getCm1License():"";var url=deliveryServicesURL+"/perc-comments-services/comment?perc-tid="+tenantId;$("form[name = 'commentForm']").attr("action",url)});var globals={dateFormatter:null};var settings={serviceurl:null,site:null,pagepath:null,tag:null,username:null,state:"APPROVED",moderated:null,fields:["createdDate","username",{name:"title",element:"h3"},"text"],defaultElement:"div",defaultClass:"perc-comments",dateformat:"EEEE, MMMM d, yyyy hh:mm aa",maxResults:0,sortby:"CREATEDDATE",ascending:true,lastCommentId:0};var methods={init:function(options){return this.each(function(){if(options){$.extend(settings,options)}globals.dateFormatter=new SimpleDateFormat(settings.dateformat);var querystring=$.deparam.querystring();if(typeof(querystring.lastCommentId)!="undefined"){settings.lastCommentId=querystring.lastCommentId}})},show:function(){var el=this;el.addClass(settings.defaultClass);getComments(function(success,data){if(success&&typeof(data.comments)!="undefined"&&data.comments!=null){var comments=data.comments;for(c=0;c<comments.length;c++){el.append(createCommentHtml(comments[c]));el.append($("<div/>").addClass("perc-comment-divider"))}}else{}var lastComment=$(".perc-comment-highlight");if(lastComment.position()){$("html,body").animate({scrollTop:lastComment.position().top},200)}})}};$.fn.PercCommentsView=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.PercCommentsRenderer")}}};function getComments(callback){$.jsonp({url:getUrl(),data:"",success:function(data,status){callback(true,data)},error:function(xOptions,error){callback(false)}})}function getUrl(){var tenantId=$.isFunction($.getCm1License)?$.getCm1License():"";var url=deliveryServicesURL+"/perc-comments-services/comment/jsonp";url+="?perc-tid="+tenantId+"&site="+settings.site;if(!isBlank(settings.pagepath)){url+="&pagepath="+settings.pagepath}if(!isBlank(settings.username)){url+="&username="+settings.username}if(!isBlank(settings.sortby)){url+="&sortby="+settings.sortby;url+="&ascending="+settings.ascending}if(!isBlank(settings.tag)){url+="&tag="+settings.tag}if(!isBlank(settings.state)){url+="&state="+settings.state}if(!isBlank(settings.moderated)){url+="&moderated="+settings.moderated}if(!isBlank(settings.lastCommentId)){url+="&lastcommentid="+settings.lastCommentId}url+="&callback=?";return url}function createCommentHtml(commentData){var comment=$("<div/>").addClass("perc-comment");var field=null;var snippet=null;if(settings.fields.length>0){if(settings.lastCommentId==commentData.id){comment.addClass("perc-comment-highlight");if(!commentData.moderated&&commentData.approvalState!="APPROVED"){comment.append($("<div/>").addClass("perc-comment-message").text("Your comment is being held for moderation. It will appear on this page after approval."))}}if($.isArray(settings.fields[0])){for(z=0;z<settings.fields.length;z++){var container=$("<div/>").addClass("comment-container-"+z);comment.append(container);createFieldsHtml(commentData,settings.fields[z],container)}}else{createFieldsHtml(commentData,settings.fields,comment)}}return comment}function createFieldsHtml(commentData,fields,container){for(i=0;i<fields.length;i++){field=getFieldObject(fields[i]);if(isBlank(commentData[field.name])){continue}snippet=$("<"+field.element+"/>").addClass("perc-comment-"+field.name).html(commentData[field.name]);if(field.name=="username"&&!(isBlank(commentData.url))){var urlSnippet=$("<a/>").addClass("perc-comment-url").attr("href",commentData.url).text(snippet.text());snippet.text("");snippet.append(urlSnippet)}if(field.name=="createdDate"){var dt=$.timeago.parse(commentData.createdDate);snippet.text(globals.dateFormatter.format(dt))}if(!(isBlank(field.pretext))){snippet.html("<span class='comment-pretext'>"+field.pretext+"</span>"+snippet.html())}if(!(isBlank(field.posttext))){snippet.html(snippet.html()+"<span class='comment-posttext'>"+field.posttext+"</span>")}container.append(snippet)}}function getFieldObject(rawField){if(typeof(rawField)=="object"){if(isBlank(rawField.element)){rawField.element=settings.defaultElement}return rawField}return{name:rawField,element:settings.defaultElement}}function isBlank(obj){return typeof(obj)=="undefined"||obj==null||obj.length<=0}$(document).ready(function(){$(".perc-comments-view").each(function(){var $el=$(this);var data=$el.attr("data");if(typeof(data)=="string"&&data.length>0){var obj=null;eval("obj = "+data+";");if(typeof(obj.finderpath)){var tmp=obj.finderpath.split("/");obj.site=tmp[2];obj.pagepath="/"+tmp.slice(3).join("/")}$el.PercCommentsView(obj);$el.PercCommentsView("show")}})})})(jQuery);(function(e){var g=1,p=0,f="page";var b=".perc-like-widget";var m=".perc-like-total-likes";var k="perc-unliked";var j="perc-liked";var r;var q;var d;var t;var h;var s=p;function n(){if(!(e(b).length)){return}var u=e(b).attr("siteName");e.PercLikedService.siteName=u;if(e.PercLikedService.isThisLiked()){s=g}else{s=p}e.PercLikedService.getTotalLikesForThisPage(function(w,v){if(w){t=v.totalLikes}else{if(s===g){t=1}else{t=0}}a(s,t)})}function a(x,w){if(typeof(x)==="undefined"||x===null){return false}if(typeof(w)==="undefined"||w===null){return false}var u=e(b);var v=u.find("button");v.blur();var y=u.find(m);if(x===g){u.removeClass(k).addClass(j);v.unbind().click(o).attr("title","Remove")}else{u.removeClass(j).addClass(k);v.unbind().click(l).attr("title","Like")}if(w!=0&&w!=undefined&&w!=null){e(".perc-like-counter").show();y.text(w);if(w==1){e(".perc-like-people").text("person")}else{e(".perc-like-people").text("people")}}else{e(".perc-like-counter").hide()}}function l(){s=g;e.PercLikedService.likeThis(function(v,u){if(v){t=u.totalLikes}else{if(s===g){t=1}else{t=0}}a(s,t)})}function o(){e.PercLikedService.unlikeThis(function(v,u){if(v){s=p;t=u.totalLikes}else{if(s===g){t=1}else{t=0}}a(s,t)})}e(document).ready(function(){n()})})(jQuery);(function(b){b(document).ready(function(){b.PercLoginView.init()});b.PercLoginView={init:d};function d(){b(".percLogin").each(function(){var e=b(this);var f=b.cookie("perc_membership_session_id");if(f!=null&&typeof(f)!="undefined"){b.PercMembershipService.getUser(f,function(g,j){if(g==b.PercServiceUtils.STATUS_SUCCESS&&j.userSummary!=null&&j.userSummary.email!=""){var k=(b.parseJSON(e.attr("data"))).loggedInMessage;var h=(b.parseJSON(e.attr("data"))).showUsername;if(h!=null&&typeof(h)!="undefined"&&h=="showUsername"){k+=j.userSummary.email}e.find(".login-contents-box").html(k);b(".perc-login-form").remove()}})}b(".perc-login-page-link").each(function(){var g=b(this);var h=g.attr("href");g.attr("href",h+"?loginRedirect="+encodeURIComponent(window.location))});b(".perc-login-form").each(function(){var g=b(this);g.submit(a)})})}function a(k){k.preventDefault();var h=b(this);var f=b(h.parents(".percLogin"));if(h.validate().form()){var j=b.parseJSON(f.attr("data"));var g={email:h.find("input[name=perc-login-email-field]").val(),password:h.find("input[name=perc-login-password-field]").val()};b.PercMembershipService.login(g,function(l,n){var e="";var o=b.deparam.querystring();if(typeof(o.loginRedirect)!="undefined"){j.loginRedirect=o.loginRedirect}if(l==b.PercServiceUtils.STATUS_SUCCESS){if(n.status.toUpperCase()==b.PercServiceUtils.STATUS_SUCCESS.toUpperCase()){b.cookie("perc_membership_session_id",n.sessionId,{path:"/",expires:"null"});h.parent().find(".perc-login-error-message").hide();e=(j.loginRedirect)?j.loginRedirect:window.location.toString();window.location=e}else{var m=n.message;if(m!=null&&typeof(m)!="undefined"){h.parent().find(".perc-login-error-message").show().html(m)}}}else{h.parent().find(".perc-login-error-message").show().html("There was an unexpected error.")}})}return false}})(jQuery);(function($){$(document).ready(function(){$.PercPageListView.updatePageList();$.PercPageListView.updateRSSLinks()});$.PercPageListView={updatePageList:updatePageList,updateRSSLinks:updateRSSLinks};function updateRSSLinks(){var tenantId=$.isFunction($.getCm1License)?$.getCm1License():"";if(tenantId.length>0){$(".perc-rss-icon").each(function(){var feedUrl=$(this).attr("href");if(feedUrl.length>0){if(feedUrl.indexOf("?")==-1){feedUrl+="?perc-tid="+tenantId}else{feedUrl+="&perc-tid="+tenantId}}$(this).attr("href",feedUrl)})}}function updatePageList(){$(".perc-page-auto-list").each(function(){var currentAutoList=$(this);if(currentAutoList.attr("data")===""){return}var queryString=eval("("+currentAutoList.attr("data")+")");$.PercPageListService.getPageEntries(queryString,function(status,pageEntries){if(status){var listRoot=currentAutoList.find(".perc-page-auto-list-structure .perc-list-main");var listElem=listRoot.find("li").clone();listRoot.empty();currentAutoList.find(".perc-list-main").empty().remove();currentAutoList.append(listRoot);for(i=0;i<pageEntries.length;i++){var pageEntry=pageEntries[i];var newListElem=listElem.clone();var rowClass=i%2==0?"perc-list-even":"perc-list-odd";var spClass=i==0?"perc-list-first":i==pageEntries.length-1?"perc-list-last":"";newListElem.addClass(rowClass);if(spClass!=""){newListElem.addClass(spClass)}var summary=null;$.each(pageEntry.properties,function(key,value){if(key=="dcterms:abstract"){summary=value.replace("<!-- morelink -->","&nbsp;"+$("<a />").attr("class","perc-no-update-link-text perc-blog-list-more-link").attr("href",pageEntry.folder+pageEntry.name).text("...more").appendTo("<div />").parent().html())}});var linkText=pageEntry.linktext;newListElem.find("a").attr("href",pageEntry.folder+pageEntry.name).html(linkText);if(summary){newListElem.find("div").append(summary)}listRoot.append(newListElem);currentAutoList.find(".perc-list-main-wrapper").append(listRoot)}}else{}})})}})(jQuery);(function(f){f(document).ready(function(){f.PercRegistrationView.init()});var a="";f.PercRegistrationView={init:g};function g(){var l=f.deparam.querystring();if(typeof(l.resetkey)!="undefined"&&f("#perc-password-reset").length){var j=l.resetkey;f.PercMembershipService.validateResetPwKey(j,function(m,p){if(p.status=="SUCCESS"){var o=p.userSummary.email;var n=f("#perc-password-reset");n.show();n.find("#perc-registration-email-field").val(o);n.data("key",j)}else{f(".perc-reg-error-message").show().text(p.message)}})}if(typeof(l.rvkey)!="undefined"&&f(".perc-reg-confirmation-mode").length){f(".perc-reg-confirmation-mode").show();var h=l.rvkey;f.PercMembershipService.confirmRegistration(h,function(m,o){if(o.status=="SUCCESS"){var n=f("#perc-confirmation-page").val();if(!n||n==""){n="/"}window.location.href=n}else{f(".perc-reg-confirmation-message").text(o.message)}})}else{if(f(".perc-registration-mode").length){f(".perc-registration-mode").show()}}var k=f.cookie("perc_membership_session_id");if(k!=null&&typeof(k)!="undefined"){f.PercMembershipService.getUser(k,function(m,n){if(m==f.PercServiceUtils.STATUS_SUCCESS&&n.email!=""){f("#perc-password-request, #perc-password-reset").remove()}})}f("#perc-registration-form, #perc-registration-cform").each(function(){var m=f(this);var n;if(m.parent(".percRegistration").attr("data")!==undefined){n=f.parseJSON(m.parent(".percRegistration").attr("data"))}else{n={}}if(f("#perc-registration-cform").length){n.verReq=true}m.data("options",n);m.submit(d)});f("#perc-password-request").each(function(){var m=f(this);m.submit(b)});f("#perc-password-reset").each(function(){var m=f(this);m.submit(e)})}function b(l){l.preventDefault();var h=f(this);if(h.validate().form()){var j=f("#perc-registration-email-field").val();var k=f("input[name='perc_password_reset_page']").val();f.PercMembershipService.resetPwRequest(j,k,function(m,n){if(m==f.PercServiceUtils.STATUS_SUCCESS){if(n.status=="AUTH_FAILED"){f(".perc-reg-error-message").show().html(n.message)}else{f(".perc-confirmation-message").show();f("#perc-password-request").remove();f(".perc-reg-error-message").hide()}}else{alert(n.message)}})}return false}function e(m){m.preventDefault();var j=f(this);if(j.validate().form()){var l=f("#perc-registration-email-field").val();var k=f("#perc-registration-password-field").val();var h=j.data("key");f.PercMembershipService.resetPassword(l,k,h,function(n,o){if(n==f.PercServiceUtils.STATUS_SUCCESS){f.cookie("perc_membership_session_id",o.sessionId,{path:"/",expires:"null"});window.location.replace("/")}else{alert(o.message)}})}return false}function d(l){l.preventDefault();var h=f(this);if(h.validate().form()){var m=f.parseJSON(h.parent().parent(".percRegistration").attr("data"));var j=h.data("options");var k={email:h.find("#perc-registration-email-field").val(),password:h.find("#perc-registration-password-field").val(),confirmationRequired:h.attr("name")=="perc-registration-cform"?true:false,confirmationPage:window.location.href};f.PercMembershipService.register(k,function(n,p){var s=f.deparam.querystring();var q="";if(typeof(s.registrationRedirect)!="undefined"){q=s.registrationRedirect}var o=h.find("#perc-confirmation-page").val();if(n==f.PercServiceUtils.STATUS_SUCCESS){if(p.status.toUpperCase()==f.PercServiceUtils.STATUS_SUCCESS.toUpperCase()){if(!j.verReq){f.cookie("perc_membership_session_id",p.sessionId,{path:"/",expires:"null"});if(o==""){if(q==""){q=m.homePageLink}else{delete s.registrationRedirect}var r=f.param.querystring("",s);if(r.length>1){window.location=q+r}else{window.location=q}}else{var r="";if(f.param.querystring()){r="?"+f.param.querystring()}window.location=o+r}}else{f(".perc-registration-mode").hide();f(".perc-reg-confirmation-message").html("<div>Thank you for registering with us.</div><div>Please check your email and confirm your registration to activate your account.</div>");f(".perc-reg-confirmation-mode").show()}}else{f(".perc-reg-error-message").show().html(p.message)}}else{f(".perc-reg-error-message").show().html("There was an unexpected error.")}})}return false}})(jQuery);(function(f){var e={init:function(g){return f(this).each(function(){this.settings={dateformat:"EEE MMM d, yyyy 'at' hh:mm aa",dateFormatter:null,summary:null,filter:null,query:null,headerText:"Results for",readMoreLink:"more...",pagingPagesText:"pages",pagingOfText:"of"};if(g){f.extend(this.settings,g)}this.settings.dateFormatter=new SimpleDateFormat(this.settings.dateformat);var h=f.deparam.querystring();delete g.summary;if(typeof(h.filter)!="undefined"){this.settings.filter=h.filter}if(typeof(h.query)!="undefined"){this.settings.query=f.parseJSON(h.query)}if(typeof(g.orderBy)!="undefined"&&typeof(this.settings.query)!="undefined"&&this.settings.query!==null){this.settings.query.orderBy=g.orderBy}if(!(parseInt(this.settings.maxResults,10)>0)){this.settings.maxResults=parseInt(this.settings.query.maxResults,10);if(isNaN(this.settings.maxResults)||this.settings.maxResults<1){this.settings.maxResults=0}}})},load:function(j,g){if(!this.settings.query){return false}if(typeof(j)!="undefined"){this.settings.query.startIndex=j}else{this.settings.query.startIndex=0}this.settings.query.maxResults=this.settings.maxResults;var h=this;if(this.settings.query!=null){return f.PercResultService.getPageEntries(this.settings.query,function(l,k){h.results=k.results;f(h).PercResultView("updateDisplay",k.totalEntries);if(typeof(g)=="function"){g(k,l)}})}},updateDisplay:function(g){el=f(this);el.empty();var h=this.totalEntries;if(!(h>0)){h=g}el.append(b(this.settings,h));el.append(f("<div/>").addClass("perc-result-divider"));if(this.results.length>0){for(c=0;c<this.results.length;c++){el.append(d(this.settings,this.results[c]));if(c<(this.results.length-1)){el.append(f("<div/>").addClass("perc-result-divider"))}}}else{}}};f.fn.PercResultView=function(g){if(e[g]){return e[g].apply(this.get(0),Array.prototype.slice.call(arguments,1))}else{if(typeof g==="object"||!g){return e.init.apply(this.get(0),arguments)}else{f.error("Method "+g+" does not exist on jQuery.PercResultRenderer")}}};function b(g,h){var j=f("<div/>").append(f("<h2/>").addClass("perc-result-title").text(g.headerText+" "+g.filter)).append(f("<p/>").addClass("perc-result-count").text(h+(h==1?" entry":" entries")));return j}function d(k,m){var j=m.folder+m.name;var h=f("<div/>").addClass("perc-result-page-item");var n=(typeof(m.properties["dcterms:title"])=="undefined")?"":m.properties["dcterms:title"];h.append(f("<h3/>").addClass("perc-result-page-title").text(n).css("cursor","pointer").click(function(){window.location=j}));var l="";if((typeof(m.properties["dcterms:created"])!="undefined")&&(m.properties["dcterms:created"]!="")){l=k.dateFormatter.format(f.timeago.parse(m.properties["dcterms:created"]))}h.append(f("<p/>").addClass("perc-result-page-date").text(l));if(k.summary){var g=(typeof(m.properties["dcterms:abstract"])=="undefined")?"":m.properties["dcterms:abstract"];h.append(f("<div/>").addClass("perc-result-page-summary").html(g.replace('<A xmlns="http://www.w3.org/1999/xhtml" xmlns:perc="http://percussion.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" class="perc-more-link"></A>',"&nbsp;"+f("<a />").attr("class","perc-no-update-link-text perc-blog-list-more-link").attr("href",j).text(k.readMoreLink).appendTo("<div />").parent().html())))}return h}var a=function(k,h,g,j){var l=(k.settings.maxResults*(h-1));if(!(l>=0)){l=0}return f(k).PercResultView("load",l,j)};f(document).ready(function(){f(".perc-result-view").each(function(){try{var h=f(this);var j=h.attr("data");if(typeof(j)=="string"&&j.length>0){var g=f.parseJSON(j)}else{g={}}h.PercResultView(g);h.PercResultsPaging(a,{})}catch(k){}})})})(jQuery);(function($){$(document).ready(function(){$.PercRssView.updateRssFeed()});$.PercRssView={updateRssFeed:updateRssFeed};function updateRssFeed(){$(".perc-feed-widget").each(function(){var currentFeedWidget=$(this);if(currentFeedWidget.attr("data")===""){return}var queryString=eval("("+currentFeedWidget.attr("data")+")");$.PercRssService.getExternalFeed(queryString.urlFeed,null,function(status,result){var feed=new JFeed(result);if(queryString.showTitle&&feed.title!=null){var feedTitle='<div class="perc-feed-title"> <a href="'+feed.link+'" target="_blank">'+feed.title+"</a> </div>";currentFeedWidget.append(feedTitle)}var itemLimit=parseInt(queryString.itemLimit.substring(queryString.itemLimit.indexOf("_")+1));var feedItem="";for(var i=0;i<feed.items.length&&i<itemLimit;i++){var item=feed.items[i];feedItem+='<div class="perc-feed-item">';if(queryString.showItemTitle&&item.title!=null){feedItem+='<div class="perc-feed-item-title"> <a href="'+item.link+'" target="_blank">'+item.title+"</a> </div>"}if(queryString.showItemDate&&item.updated!=null){var formattedDate="";var formattedTime="";var date=new Date(item.updated);formattedDate=$.datepicker.formatDate(queryString.itemDateFormat,date);formattedDate=formattedDate.replace("hh",date.getHours());formattedDate=formattedDate.replace("nn",date.getMinutes());feedItem+='<div class="perc-feed-item-date">'+formattedDate+"</div>"}if(queryString.showItemDescription&&item.description!=null){var description=$("<div>").html(item.description);if(queryString.itemRemoveHtml){description.html(description.text())}if(!queryString.itemDescriptionEmpty){description.html(description.html().substring(0,queryString.itemDescriptionLength));if(item.description.substring(queryString.itemDescriptionLength+1)!=""){description.html($.trim(description.html())+"...")}}feedItem+='<div class="perc-feed-item-description">'+description.html()+"</div>"}feedItem+="</div>"}currentFeedWidget.append(feedItem)})})}})(jQuery);(function(a){a(document).ready(function(){a.PercSecureLoginView.init()});a.PercSecureLoginView={init:b};function b(){a(".percLogin-form").each(function(){var e=a.deparam.querystring();if(typeof(e.error)!="undefined"){var d=a(this).find(".perc-secure-login-error-message");d.show()}})}})(jQuery);(function(a){function b(){var d=true;stLight.options({publisher:"9b8ea0ea-c2c0-4a43-a107-df0615eaa6eb"});a(".perc-share-this-widget-facebook-button").addClass("st_facebook_custom");a(".perc-share-this-widget-twitter-button").addClass("st_twitter_custom");a(".perc-share-this-widget-digg-button").addClass("st_digg_custom")}a(document).ready(function(){if(a(".perc-share-this-widget").length>0){a("head").append("<script src='/web_resources/cm/jslib/shareThis.js' type='text/javascript'><\/script>");b()}})})(jQuery);(function($){$(document).ready(function(){$.PercTagListView.updateTagList()});$.PercTagListView={updateTagList:updateTagList};function updateTagList(){$(".perc-tag-list").each(function(){var currentTagList=$(this);if(currentTagList.attr("data")===""){return}var queryString=eval("("+currentTagList.attr("data")+")");var renderOption=queryString.tag_render_option;delete queryString.tag_render_option;var pageResult=queryString.tag_page_result;delete queryString.tag_page_result;var orderBy=queryString.orderBy;delete queryString.orderBy;var baseURL=window.location.protocol+"//"+window.location.host;var strJSON=JSON.stringify(queryString);$.PercTagListService.getTagEntries(queryString,orderBy,function(status,tagEntries){if(status){$(".perc-list-empy-title").remove();var listRoot=currentTagList.find(".perc-tag-list-structure .perc-list-main");var listElem=listRoot.find("li").clone();listElem.addClass("perc-tag-element");listRoot.empty();currentTagList.find(".perc-list-main-container").empty().remove();currentTagList.find(".perc-comma-separated-main-container").empty().remove();var separator="";if(typeof(renderOption)!="undefined"&&renderOption!=""&&renderOption=="commaSeparated"){listRoot.addClass("perc-list-main-inline");listElem.addClass("perc-list-elemment-inline");separator=","}else{listRoot.addClass("perc-list-vertical")}currentTagList.append(listRoot);for(i=0;i<tagEntries.properties.length;i++){var tagEntry=tagEntries.properties[i];var newListElem=listElem.clone();var rowClass=i%2==0?"perc-list-even":"perc-list-odd";var spClass="";if(i==0){spClass="perc-list-first"}else{if(i==tagEntries.properties.length-1){spClass="perc-list-last";separator=""}}newListElem.addClass(rowClass);if(spClass!=""){newListElem.addClass(spClass)}var linkText=tagEntry.tagName+" ("+tagEntry.tagCount+")"+separator;if(typeof(pageResult)!="undefined"&&pageResult!=""){var query=eval("("+strJSON+")");query.criteria.push("perc:tags = '"+tagEntry.tagName+"'");var encodedQuery="&query="+encodeURIComponent(JSON.stringify(query));newListElem.find("a").attr("href",baseURL+pageResult+"?filter="+tagEntry.tagName+encodedQuery).html(linkText)}else{newListElem.find("a").html(linkText)}listRoot.append(newListElem)}}else{}})})}})(jQuery);